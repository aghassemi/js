(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";module.exports=function(n){function t(n){var t=new e(n),r=t.promise();return r.isRejected()?r:(t.setHowMany(1),t.setUnwrap(),t.init(),r)}var e=n._SomePromiseArray;n.any=function(n){return t(n)},n.prototype.any=function(){return t(this)}};
},{}],2:[function(require,module,exports){
(function (process){
"use strict";function Async(){this._isTickUsed=!1,this._schedule=schedule,this._length=0,this._lateBuffer=new Queue(16),this._functionBuffer=new Queue(65536);var e=this;this.consumeFunctionBuffer=function(){e._consumeFunctionBuffer()}}var schedule=require("./schedule.js"),Queue=require("./queue.js"),errorObj=require("./util.js").errorObj,tryCatch1=require("./util.js").tryCatch1,_process="undefined"!=typeof process?process:void 0;Async.prototype.haveItemsQueued=function(){return this._length>0},Async.prototype.invokeLater=function(e,t,s){void 0===_process||null==_process.domain||e.domain||(e=_process.domain.bind(e)),this._lateBuffer.push(e,t,s),this._queueTick()},Async.prototype.invoke=function(e,t,s){void 0===_process||null==_process.domain||e.domain||(e=_process.domain.bind(e));var i=this._functionBuffer;i.push(e,t,s),this._length=i.length(),this._queueTick()},Async.prototype._consumeFunctionBuffer=function(){for(var e=this._functionBuffer;e.length()>0;){var t=e.shift(),s=e.shift(),i=e.shift();t.call(s,i)}this._reset(),this._consumeLateBuffer()},Async.prototype._consumeLateBuffer=function(){for(var e=this._lateBuffer;e.length()>0;){var t=e.shift(),s=e.shift(),i=e.shift(),n=tryCatch1(t,s,i);if(n===errorObj){if(this._queueTick(),null==t.domain)throw n.e;t.domain.emit("error",n.e)}}},Async.prototype._queueTick=function(){this._isTickUsed||(this._schedule(this.consumeFunctionBuffer),this._isTickUsed=!0)},Async.prototype._reset=function(){this._isTickUsed=!1,this._length=0},module.exports=new Async;
}).call(this,require("FWaASH"))
},{"./queue.js":25,"./schedule.js":28,"./util.js":35,"FWaASH":42}],3:[function(require,module,exports){
"use strict";var Promise=require("./promise.js")();module.exports=Promise;
},{"./promise.js":20}],4:[function(require,module,exports){
"use strict";var cr=Object.create;if(cr){var callerCache=cr(null),getterCache=cr(null);callerCache[" size"]=getterCache[" size"]=0}module.exports=function(e){function t(e){return new Function("obj","                                             \n        'use strict'                                                         \n        var len = this.length;                                               \n        switch(len) {                                                        \n            case 1: return obj.methodName(this[0]);                          \n            case 2: return obj.methodName(this[0], this[1]);                 \n            case 3: return obj.methodName(this[0], this[1], this[2]);        \n            case 0: return obj.methodName();                                 \n            default: return obj.methodName.apply(obj, this);                 \n        }                                                                    \n        ".replace(/methodName/g,e))}function n(e){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",e))}function r(e,t,n){var r=n[e];if("function"!=typeof r){if(!l(e))return null;if(r=t(e),n[e]=r,n[" size"]++,n[" size"]>512){for(var i=Object.keys(n),o=0;256>o;++o)delete n[i[o]];n[" size"]=i.length-256}}return r}function i(e){return r(e,t,callerCache)}function o(e){return r(e,n,getterCache)}function u(e){return e[this.pop()].apply(e,this)}function a(e){return e[this]}function c(e){return e[this]}var s=require("./util.js"),h=s.canEvaluate,l=s.isIdentifier;e.prototype.call=function(e){for(var t=arguments.length,n=new Array(t-1),r=1;t>r;++r)n[r-1]=arguments[r];if(h){var o=i(e);if(null!==o)return this._then(o,void 0,void 0,n,void 0)}return n.push(e),this._then(u,void 0,void 0,n,void 0)},e.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=c;else if(h){var r=o(e);t=null!==r?r:a}else t=a;return this._then(t,void 0,void 0,e,void 0)}};
},{"./util.js":35}],5:[function(require,module,exports){
"use strict";module.exports=function(e,t){var n=require("./errors.js"),a=n.canAttach,r=require("./async.js"),l=n.CancellationError;e.prototype._cancel=function(e){if(!this.isCancellable())return this;for(var t,n=this;void 0!==(t=n._cancellationParent)&&t.isCancellable();)n=t;n._attachExtraTrace(e),n._rejectUnchecked(e)},e.prototype.cancel=function(e){return this.isCancellable()?(e=void 0!==e?a(e)?e:new Error(e+""):new l,r.invokeLater(this._cancel,this,e),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var n=new e(t);return n._propagateFrom(this,6),n._follow(this),n._unsetCancellable(),n},e.prototype.fork=function(e,t,n){var a=this._then(e,t,n,void 0,void 0);return a._setCancellable(),a._cancellationParent=void 0,a}};
},{"./async.js":2,"./errors.js":10}],6:[function(require,module,exports){
"use strict";module.exports=function(){function e(e){var r;if("function"==typeof e)r="[function "+(e.name||"anonymous")+"]";else{r=e.toString();var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(r))try{var o=JSON.stringify(e);r=o}catch(i){}0===r.length&&(r="(empty array)")}return"(<"+t(r)+">, no stack trace)"}function t(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function r(e,t){this.captureStackTrace(r,t)}var n=require("./util.js").inherits,o=require("./es5.js").defineProperty,i=new RegExp("\\b(?:[a-zA-Z0-9.]+\\$_\\w+|tryCatch(?:1|2|3|4|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b"),s=null,a=null;n(r,Error),r.prototype.captureStackTrace=function(e,t){c(this,e,t)},r.possiblyUnhandledRejection=function(e){if("object"==typeof console){var t;if("object"==typeof e||"function"==typeof e){var r=e.stack;t="Possibly unhandled "+a(r,e)}else t="Possibly unhandled "+String(e);"function"==typeof console.error||"object"==typeof console.error?console.error(t):("function"==typeof console.log||"object"==typeof console.log)&&console.log(t)}},r.combine=function(e,t){for(var r=e.length-1,n=t.length-1;n>=0;--n){var o=t[n];if(e[r]!==o)break;e.pop(),r--}e.push("From previous event:");for(var a=e.concat(t),c=[],n=0,u=a.length;u>n;++n)i.test(a[n])&&s.test(a[n])||n>0&&!s.test(a[n])&&"From previous event:"!==a[n]||c.push(a[n]);return c},r.protectErrorMessageNewlines=function(e){for(var t=0;t<e.length&&!s.test(e[t]);++t);if(!(1>=t)){for(var r=[],n=0;t>n;++n)r.push(e.shift());e.unshift(r.join("\x00"))}},r.isSupported=function(){return"function"==typeof c};var c=function u(){if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){s=/^\s*at\s*/,a=function(t,r){return"string"==typeof t?t:void 0!==r.name&&void 0!==r.message?r.name+". "+r.message:e(r)};var t=Error.captureStackTrace;return function(e,r){t(e,r)}}var r=new Error;if("string"==typeof r.stack&&"function"==typeof"".startsWith&&r.stack.startsWith("stackDetection@")&&"stackDetection"===u.name){o(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),s=/@/;var n=/[@\n]/;return a=function(t,r){return"string"==typeof t?r.name+". "+r.message+"\n"+t:void 0!==r.name&&void 0!==r.message?r.name+". "+r.message:e(r)},function(e){for(var t=(new Error).stack,r=t.split(n),o=r.length,i="",s=0;o>s;s+=2)i+=r[s],i+="@",i+=r[s+1],i+="\n";e.stack=i}}return a=function(t,r){return"string"==typeof t?t:"object"!=typeof r&&"function"!=typeof r||void 0===r.name||void 0===r.message?e(r):r.name+". "+r.message},null}();return r};
},{"./es5.js":12,"./util.js":35}],7:[function(require,module,exports){
"use strict";module.exports=function(r){function e(r,e,t){this._instances=r,this._callback=e,this._promise=t}function t(r,e){var t={},i=o(r,t,e);if(i===s)return i;var n=a(t);return n.length?(s.e=new c("Catch filter must inherit from Error or be a simple predicate function"),s):i}var i=require("./util.js"),n=require("./errors.js"),o=i.tryCatch1,s=i.errorObj,a=require("./es5.js").keys,c=n.TypeError;return e.prototype.doFilter=function(e){for(var i=this._callback,a=this._promise,c=a._boundTo,u=0,f=this._instances.length;f>u;++u){var h=this._instances[u],l=h===Error||null!=h&&h.prototype instanceof Error;if(l&&e instanceof h){var p=o(i,c,e);return p===s?(r.e=p.e,r):p}if("function"==typeof h&&!l){var _=t(h,e);if(_===s){var v=n.canAttach(s.e)?s.e:new Error(s.e+"");this._promise._attachExtraTrace(v),e=s.e;break}if(_){var p=o(i,c,e);return p===s?(r.e=p.e,r):p}}}return r.e=e,r},e};
},{"./errors.js":10,"./es5.js":12,"./util.js":35}],8:[function(require,module,exports){
"use strict";var util=require("./util.js"),isPrimitive=util.isPrimitive,wrapsPrimitiveReceiver=util.wrapsPrimitiveReceiver;module.exports=function(i){var t=function(){return this},r=function(){throw this},e=function(i,t){return 1===t?function(){throw i}:2===t?function(){return i}:void 0};i.prototype["return"]=i.prototype.thenReturn=function(i){return wrapsPrimitiveReceiver&&isPrimitive(i)?this._then(e(i,2),void 0,void 0,void 0,void 0):this._then(t,void 0,void 0,i,void 0)},i.prototype["throw"]=i.prototype.thenThrow=function(i){return wrapsPrimitiveReceiver&&isPrimitive(i)?this._then(e(i,1),void 0,void 0,void 0,void 0):this._then(r,void 0,void 0,i,void 0)}};
},{"./util.js":35}],9:[function(require,module,exports){
"use strict";module.exports=function(t,e){var n=t.reduce;t.prototype.each=function(t){return n(this,t,null,e)},t.each=function(t,u){return n(t,u,null,e)}};
},{}],10:[function(require,module,exports){
"use strict";function markAsOriginatingFromRejection(r){try{notEnumerableProp(r,"isOperational",!0)}catch(e){}}function originatesFromRejection(r){return null==r?!1:r instanceof OperationalError||r.isOperational===!0}function isError(r){return r instanceof Error}function canAttach(r){return isError(r)}function subError(r,e){function o(t){return this instanceof o?(this.message="string"==typeof t?t:e,this.name=r,void(Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new o(t)}return inherits(o,Error),o}function OperationalError(r){this.name="OperationalError",this.message=r,this.cause=r,this.isOperational=!0,r instanceof Error?(this.message=r.message,this.stack=r.stack):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var Objectfreeze=require("./es5.js").freeze,util=require("./util.js"),inherits=util.inherits,notEnumerableProp=util.notEnumerableProp,_TypeError,_RangeError,CancellationError=subError("CancellationError","cancellation error"),TimeoutError=subError("TimeoutError","timeout error"),AggregateError=subError("AggregateError","aggregate error");try{_TypeError=TypeError,_RangeError=RangeError}catch(e){_TypeError=subError("TypeError","type error"),_RangeError=subError("RangeError","range error")}for(var methods="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),i=0;i<methods.length;++i)"function"==typeof Array.prototype[methods[i]]&&(AggregateError.prototype[methods[i]]=Array.prototype[methods[i]]);AggregateError.prototype.length=0,AggregateError.prototype.isOperational=!0;var level=0;AggregateError.prototype.toString=function(){var r=Array(4*level+1).join(" "),e="\n"+r+"AggregateError of:\n";level++,r=Array(4*level+1).join(" ");for(var o=0;o<this.length;++o){for(var t=this[o]===this?"[Circular AggregateError]":this[o]+"",a=t.split("\n"),i=0;i<a.length;++i)a[i]=r+a[i];t=a.join("\n"),e+=t+"\n"}return level--,e},inherits(OperationalError,Error);var key="__BluebirdErrorTypes__",errorTypes=Error[key];errorTypes||(errorTypes=Objectfreeze({CancellationError:CancellationError,TimeoutError:TimeoutError,OperationalError:OperationalError,RejectionError:OperationalError,AggregateError:AggregateError}),notEnumerableProp(Error,key,errorTypes)),module.exports={Error:Error,TypeError:_TypeError,RangeError:_RangeError,CancellationError:errorTypes.CancellationError,OperationalError:errorTypes.OperationalError,TimeoutError:errorTypes.TimeoutError,AggregateError:errorTypes.AggregateError,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,canAttach:canAttach};
},{"./es5.js":12,"./util.js":35}],11:[function(require,module,exports){
"use strict";module.exports=function(r){function e(e){var n=new t(e),u=r.rejected(n),o=u._peekContext();return null!=o&&o._attachExtraTrace(n),u}var t=require("./errors.js").TypeError;return e};
},{"./errors.js":10}],12:[function(require,module,exports){
var isES5=function(){"use strict";return void 0===this}();if(isES5)module.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:isES5};else{var has={}.hasOwnProperty,str={}.toString,proto={}.constructor.prototype,ObjectKeys=function(e){var r=[];for(var t in e)has.call(e,t)&&r.push(t);return r},ObjectDefineProperty=function(e,r,t){return e[r]=t.value,e},ObjectFreeze=function(e){return e},ObjectGetPrototypeOf=function(e){try{return Object(e).constructor.prototype}catch(r){return proto}},ArrayIsArray=function(e){try{return"[object Array]"===str.call(e)}catch(r){return!1}};module.exports={isArray:ArrayIsArray,keys:ObjectKeys,defineProperty:ObjectDefineProperty,freeze:ObjectFreeze,getPrototypeOf:ObjectGetPrototypeOf,isES5:isES5}}
},{}],13:[function(require,module,exports){
"use strict";module.exports=function(t,r){var e=t.map;t.prototype.filter=function(t,n){return e(this,t,n,r)},t.filter=function(t,n,i){return e(t,n,i,r)}};
},{}],14:[function(require,module,exports){
"use strict";module.exports=function(t,i,r){function n(){return this}function o(){throw this}function e(t){return function(){return t}}function u(t){return function(){throw t}}function s(t,i,r){var s;return s=d&&c(i)?r?e(i):u(i):r?n:o,t._then(s,l,void 0,i,void 0)}function h(n){var o=this.promise,e=this.handler,u=o._isBound()?e.call(o._boundTo):e();if(void 0!==u){var h=r(u,void 0);if(h instanceof t)return s(h,n,o.isFulfilled())}return o.isRejected()?(i.e=n,i):n}function a(i){var n=this.promise,o=this.handler,e=n._isBound()?o.call(n._boundTo,i):o(i);if(void 0!==e){var u=r(e,void 0);if(u instanceof t)return s(u,i,!0)}return i}var f=require("./util.js"),d=f.wrapsPrimitiveReceiver,c=f.isPrimitive,l=f.thrower;t.prototype._passThroughHandler=function(t,i){if("function"!=typeof t)return this.then();var r={promise:this,handler:t};return this._then(i?h:a,i?h:void 0,void 0,r,void 0)},t.prototype.lastly=t.prototype["finally"]=function(t){return this._passThroughHandler(t,!0)},t.prototype.tap=function(t){return this._passThroughHandler(t,!1)}};
},{"./util.js":35}],15:[function(require,module,exports){
"use strict";module.exports=function(t,e,r,n){function i(e,r){for(var o=h,s=t,a=r.length,u=0;a>u;++u){var c=_(r[u],void 0,e);if(c===o)return s.reject(o.e);var f=n(c,i);if(f instanceof s)return f}return null}function o(e,n,i){var o=this._promise=new t(r);o._setTrace(void 0),this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f}var s=require("./errors.js"),a=s.TypeError,u=require("./util.js").deprecated,c=require("./util.js"),h=c.errorObj,_=c.tryCatch1,f=[];o.prototype.promise=function(){return this._promise},o.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},o.prototype._continue=function(e){if(e===h){this._generator=void 0;var r=s.canAttach(e.e)?e.e:new Error(e.e+"");return this._promise._attachExtraTrace(r),void this._promise._reject(e.e,r)}var o=e.value;if(e.done===!0)this._generator=void 0,this._promise._tryFollow(o)||this._promise._fulfill(o);else{var u=n(o,void 0);if(!(u instanceof t)&&(u=i(u,this._yieldHandlers),null===u))return void this._throw(new a("A value was yielded that could not be treated as a promise"));u._then(this._next,this._throw,void 0,this,null)}},o.prototype._throw=function(t){s.canAttach(t)&&this._promise._attachExtraTrace(t),this._continue(_(this._generator["throw"],this._generator,t))},o.prototype._next=function(t){this._continue(_(this._generator.next,this._generator,t))},t.coroutine=function(t,e){if("function"!=typeof t)throw new a("generatorFunction must be a function");var r=Object(e).yieldHandler,n=o;return function(){var e=t.apply(this,arguments),i=new n(void 0,void 0,r);return i._generator=e,i._next(void 0),i.promise()}},t.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new a("fn must be a function");f.push(t)},t.spawn=function(r){if(u("Promise.spawn is deprecated. Use Promise.coroutine instead."),"function"!=typeof r)return e("generatorFunction must be a function");var n=new o(r,this),i=n.promise();return n._run(t.spawn),i}};
},{"./errors.js":10,"./util.js":35}],16:[function(require,module,exports){
"use strict";module.exports=function(e,t,n,r){var l=require("./util.js"),i=l.canEvaluate,a=l.tryCatch1,s=l.errorObj;if(i){for(var o=function(e){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,e))},u=function(e){for(var t=[],n=1;e>=n;++n)t.push("holder.p"+n);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,t.join(", ")))},c=[],h=[void 0],v=1;5>=v;++v)c.push(o(v)),h.push(u(v));var d=function(e,t){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=t,this.total=e,this.now=0};d.prototype.callers=h,d.prototype.checkFulfillment=function(e){var t=this.now;t++;var n=this.total;if(t>=n){var r=this.callers[n],l=a(r,void 0,this);l===s?e._rejectUnchecked(l.e):e._tryFollow(l)||e._fulfillUnchecked(l)}else this.now=t}}e.join=function(){var l,a=arguments.length-1;if(a>0&&"function"==typeof arguments[a]&&(l=arguments[a],6>a&&i)){var s=new e(r);s._setTrace(void 0);for(var o=new d(a,l),u=s._reject,h=c,v=0;a>v;++v){var f=n(arguments[v],void 0);f instanceof e?f.isPending()?f._then(h[v],u,void 0,s,o):f.isFulfilled()?h[v].call(s,f._settledValue,o):(s._reject(f._settledValue),f._unsetRejectionIsUnhandled()):h[v].call(s,f,o)}return s}for(var p=arguments.length,g=new Array(p),m=0;p>m;++m)g[m]=arguments[m];var s=new t(g).promise();return void 0!==l?s.spread(l):s}};
},{"./util.js":35}],17:[function(require,module,exports){
"use strict";module.exports=function(t,i,e,r,n){function s(t,i,e,r){this.constructor$(t),this._callback=i,this._preservedValues=r===n?new Array(this.length()):null,this._limit=e,this._inFlight=0,this._queue=e>=1?[]:_,this._init$(void 0,-2)}function u(t,i,e,r){var n="object"==typeof e&&null!==e?e.concurrency:0;return n="number"==typeof n&&isFinite(n)&&n>=1?n:0,new s(t,i,n,r)}var o=require("./util.js"),l=o.tryCatch3,h=o.errorObj,f={},_=[];o.inherits(s,i),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(i,e){var n=this._values;if(null!==n){var s=this.length(),u=this._preservedValues,o=this._limit;if(n[e]===f){if(n[e]=i,o>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(o>=1&&this._inFlight>=o)return n[e]=i,void this._queue.push(e);null!==u&&(u[e]=i);var _=this._callback,a=this._promise._boundTo,p=l(_,a,i,e,s);if(p===h)return this._reject(p.e);var c=r(p,void 0);if(c instanceof t){if(c.isPending())return o>=1&&this._inFlight++,n[e]=f,c._proxyPromiseArray(this,e);if(!c.isFulfilled())return c._unsetRejectionIsUnhandled(),this._reject(c.reason());p=c.value()}n[e]=p}var v=++this._totalResolved;v>=s&&(null!==u?this._filter(n,u):this._resolve(n))}},s.prototype._drainQueue=function(){for(var t=this._queue,i=this._limit,e=this._values;t.length>0&&this._inFlight<i;){var r=t.pop();this._promiseFulfilled(e[r],r)}},s.prototype._filter=function(t,i){for(var e=i.length,r=new Array(e),n=0,s=0;e>s;++s)t[s]&&(r[n++]=i[s]);r.length=n,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(t,i){return"function"!=typeof t?e("fn must be a function"):u(this,t,i,null).promise()},t.map=function(t,i,r,n){return"function"!=typeof i?e("fn must be a function"):u(t,i,r,n).promise()}};
},{"./util.js":35}],18:[function(require,module,exports){
"use strict";module.exports=function(t){function i(t){throw t}function r(t,r){if(!e.isArray(t))return n(t,r);var o=e.tryCatchApply(this,[null].concat(t),r);o===s&&u.invokeLater(i,void 0,o.e)}function n(t,r){var n=this,o=void 0===t?c(n,r,null):a(n,r,null,t);o===s&&u.invokeLater(i,void 0,o.e)}function o(t,r){var n=this,o=c(n,r,t);o===s&&u.invokeLater(i,void 0,o.e)}var e=require("./util.js"),u=require("./async.js"),a=e.tryCatch2,c=e.tryCatch1,s=e.errorObj;t.prototype.nodeify=function(t,i){if("function"==typeof t){var e=n;void 0!==i&&Object(i).spread&&(e=r),this._then(e,o,void 0,t,this._boundTo)}return this}};
},{"./async.js":2,"./util.js":35}],19:[function(require,module,exports){
"use strict";module.exports=function(e,r){var t=require("./util.js"),s=require("./async.js"),o=require("./errors.js"),i=t.tryCatch1,n=t.errorObj;e.prototype.progressed=function(e){return this._then(void 0,void 0,e,void 0,void 0)},e.prototype._progress=function(e){this._isFollowingOrFulfilledOrRejected()||this._progressUnchecked(e)},e.prototype._clearFirstHandlerData$Base=e.prototype._clearFirstHandlerData,e.prototype._clearFirstHandlerData=function(){this._clearFirstHandlerData$Base(),this._progressHandler0=void 0},e.prototype._progressHandlerAt=function(e){return 0===e?this._progressHandler0:this[(e<<2)+e-5+2]},e.prototype._doProgressWith=function(r){var t=r.value,s=r.handler,a=r.promise,p=r.receiver,c=i(s,p,t);if(c===n){if(null!=c.e&&"StopProgressPropagation"!==c.e.name){var l=o.canAttach(c.e)?c.e:new Error(c.e+"");a._attachExtraTrace(l),a._progress(c.e)}}else c instanceof e?c._then(a._progress,null,null,a,void 0):a._progress(c)},e.prototype._progressUnchecked=function(t){if(this.isPending())for(var o=this._length(),i=this._progress,n=0;o>n;n++){var a=this._progressHandlerAt(n),p=this._promiseAt(n);if(p instanceof e)"function"==typeof a?s.invoke(this._doProgressWith,this,{handler:a,promise:p,receiver:this._receiverAt(n),value:t}):s.invoke(i,p,t);else{var c=this._receiverAt(n);"function"==typeof a?a.call(c,t,p):c instanceof e&&c._isProxied()?c._progressUnchecked(t):c instanceof r&&c._promiseProgressed(t,p)}}}};
},{"./async.js":2,"./errors.js":10,"./util.js":35}],20:[function(require,module,exports){
(function (process){
"use strict";function noConflict(e){try{Promise===e&&(Promise=old)}catch(t){}return e}var old;"undefined"!=typeof Promise&&(old=Promise),module.exports=function(){function e(t){if("function"!=typeof t)throw new F("the promise constructor requires a resolver function");if(this.constructor!==e)throw new F("the promise constructor cannot be invoked directly");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,t!==n&&this._resolveFromResolver(t)}function t(e){return e[0]}var i=require("./util.js"),r=require("./async.js"),o=require("./errors.js"),n=function(){},s={},l={e:null},a=require("./thenables.js")(e,n),c=require("./promise_array.js")(e,n,a),u=require("./captured_trace.js")(),d=require("./catch_filter.js")(l),h=require("./promise_resolver.js"),_=i.isArray,f=i.errorObj,p=i.tryCatch1,v=i.tryCatch2,y=i.tryCatchApply,j=o.RangeError,F=o.TypeError,b=o.CancellationError,m=o.TimeoutError,g=o.OperationalError,k=o.originatesFromRejection,w=o.markAsOriginatingFromRejection,R=o.canAttach,T=i.thrower,P=require("./errors_api_rejection")(e),C=function(){return new F("circular promise resolution chain")};e.prototype.bind=function(i){var r=a(i,void 0),o=new e(n);if(r instanceof e){var s=r.then(function(e){o._setBoundTo(e)}),l=e.all([this,s]).then(t);o._follow(l)}else o._follow(this),o._setBoundTo(i);return o._propagateFrom(this,3),o},e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var i,o=new Array(t-1),n=0;for(i=0;t-1>i;++i){var s=arguments[i];if("function"!=typeof s){var l=new F("A catch filter must be an error constructor or a filter function");return this._attachExtraTrace(l),void r.invoke(this._reject,this,l)}o[n++]=s}o.length=n,e=arguments[i],this._resetTrace();var a=new d(o,e,this);return this._then(void 0,a.doFilter,void 0,a,void 0)}return this._then(void 0,e,void 0,void 0,void 0)},e.prototype.then=function(e,t,i){return this._then(e,t,i,void 0,void 0)},e.prototype.done=function(e,t,i){var r=this._then(e,t,i,void 0,void 0);r._setIsFinal()},e.prototype.spread=function(e,t){return this._then(e,t,void 0,s,void 0)},e.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},e.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this._settledValue,e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this._settledValue,e.isRejected=!0),e},e.prototype.all=function(){return new c(this).promise()},e.is=function(t){return t instanceof e},e.all=function(e){return new c(e).promise()},e.prototype.error=function(e){return this.caught(k,e)},e.prototype._resolveFromSyncValue=function(t){if(t===f)this._cleanValues(),this._setRejected(),this._settledValue=t.e,this._ensurePossibleRejectionHandled();else{var i=a(t,void 0);i instanceof e?this._follow(i):(this._cleanValues(),this._setFulfilled(),this._settledValue=t)}},e.method=function(t){if("function"!=typeof t)throw new F("fn must be a function");return function(){var i;switch(arguments.length){case 0:i=p(t,this,void 0);break;case 1:i=p(t,this,arguments[0]);break;case 2:i=v(t,this,arguments[0],arguments[1]);break;default:for(var r=arguments.length,o=new Array(r),s=0;r>s;++s)o[s]=arguments[s];i=y(t,o,this)}var l=new e(n);return l._setTrace(void 0),l._resolveFromSyncValue(i),l}},e.attempt=e["try"]=function(t,i,r){if("function"!=typeof t)return P("fn must be a function");var o=_(i)?y(t,i,r):p(t,r,i),s=new e(n);return s._setTrace(void 0),s._resolveFromSyncValue(o),s},e.defer=e.pending=function(){var t=new e(n);return t._setTrace(void 0),new h(t)},e.bind=function(t){var i=a(t,void 0),r=new e(n);if(r._setTrace(void 0),i instanceof e){var o=i.then(function(e){r._setBoundTo(e)});r._follow(o)}else r._setBoundTo(t),r._setFulfilled();return r},e.cast=function(t){var i=a(t,void 0);if(!(i instanceof e)){var r=i;i=new e(n),i._setTrace(void 0),i._setFulfilled(),i._cleanValues(),i._settledValue=r}return i},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(t){var i=new e(n);if(i._setTrace(void 0),w(t),i._cleanValues(),i._setRejected(),i._settledValue=t,!R(t)){var r=new Error(t+"");i._setCarriedStackTrace(r)}return i._ensurePossibleRejectionHandled(),i},e.onPossiblyUnhandledRejection=function(e){u.possiblyUnhandledRejection="function"==typeof e?e:void 0};var U;e.onUnhandledRejectionHandled=function(e){U="function"==typeof e?e:void 0};var q=!1||!("undefined"==typeof process||"string"!=typeof process.execPath||"object"!=typeof process.env||!process.env.BLUEBIRD_DEBUG&&"development"!==process.env.NODE_ENV);e.longStackTraces=function(){if(r.haveItemsQueued()&&q===!1)throw new Error("cannot enable long stack traces after promises have been created");q=u.isSupported()},e.hasLongStackTraces=function(){return q&&u.isSupported()},e.prototype._then=function(t,i,o,s,l){var a=void 0!==l,c=a?l:new e(n);if(!a){if(q){var u=this._peekContext()===this._traceParent;c._traceParent=u?this._traceParent:this}c._propagateFrom(this,7)}var d=this._addCallbacks(t,i,o,c,s);return this.isResolved()&&r.invoke(this._queueSettleAt,this,d),c},e.prototype._length=function(){return 262143&this._bitField},e.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},e.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},e.prototype._setLength=function(e){this._bitField=-262144&this._bitField|262143&e},e.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},e.prototype._setRejected=function(){this._bitField=134217728|this._bitField},e.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},e.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},e.prototype._isFinal=function(){return(33554432&this._bitField)>0},e.prototype._cancellable=function(){return(67108864&this._bitField)>0},e.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},e.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},e.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},e.prototype._setCarriedStackTrace=function(e){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=e},e.prototype._unsetCarriedStackTrace=function(){this._bitField=-1048577&this._bitField,this._fulfillmentHandler0=void 0},e.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},e.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},e.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[(e<<2)+e-5+4];return this._isBound()&&void 0===t?this._boundTo:t},e.prototype._promiseAt=function(e){return 0===e?this._promise0:this[(e<<2)+e-5+3]},e.prototype._fulfillmentHandlerAt=function(e){return 0===e?this._fulfillmentHandler0:this[(e<<2)+e-5+0]},e.prototype._rejectionHandlerAt=function(e){return 0===e?this._rejectionHandler0:this[(e<<2)+e-5+1]},e.prototype._addCallbacks=function(e,t,i,r,o){var n=this._length();if(n>=262138&&(n=0,this._setLength(0)),0===n)this._promise0=r,void 0!==o&&(this._receiver0=o),"function"!=typeof e||this._isCarryingStackTrace()||(this._fulfillmentHandler0=e),"function"==typeof t&&(this._rejectionHandler0=t),"function"==typeof i&&(this._progressHandler0=i);else{var s=(n<<2)+n-5;this[s+3]=r,this[s+4]=o,this[s+0]="function"==typeof e?e:void 0,this[s+1]="function"==typeof t?t:void 0,this[s+2]="function"==typeof i?i:void 0}return this._setLength(n+1),n},e.prototype._setProxyHandlers=function(e,t){var i=this._length();if(i>=262138&&(i=0,this._setLength(0)),0===i)this._promise0=t,this._receiver0=e;else{var r=(i<<2)+i-5;this[r+3]=t,this[r+4]=e,this[r+0]=this[r+1]=this[r+2]=void 0}this._setLength(i+1)},e.prototype._proxyPromiseArray=function(e,t){this._setProxyHandlers(e,t)},e.prototype._proxyPromise=function(e){e._setProxied(),this._setProxyHandlers(e,-15)},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=8388608|this._bitField,this._boundTo=e):this._bitField=-8388609&this._bitField},e.prototype._isBound=function(){return 8388608===(8388608&this._bitField)},e.prototype._resolveFromResolver=function(e){function t(e){r._tryFollow(e)||r._fulfill(e)}function i(e){var t=R(e)?e:new Error(e+"");r._attachExtraTrace(t),w(e),r._reject(e,t===e?void 0:t)}var r=this;this._setTrace(void 0),this._pushContext();var o=v(e,void 0,t,i);if(this._popContext(),void 0!==o&&o===f){var n=o.e,s=R(n)?n:new Error(n+"");r._reject(n,s)}},e.prototype._spreadSlowCase=function(e,t,i,r){var o=new c(i).promise(),n=o._then(function(){return e.apply(r,arguments)},void 0,void 0,s,void 0);t._follow(n)},e.prototype._callSpread=function(t,i,r){var o=this._boundTo;if(_(r))for(var n=0,s=r.length;s>n;++n)if(a(r[n],void 0)instanceof e)return void this._spreadSlowCase(t,i,r,o);return i._pushContext(),y(t,r,o)},e.prototype._callHandler=function(e,t,i,r){var o;return t!==s||this.isRejected()?(i._pushContext(),o=p(e,t,r)):o=this._callSpread(e,i,r),i._popContext(),o},e.prototype._settlePromiseFromHandler=function(t,i,r,o){if(!(o instanceof e))return void t.call(i,r,o);var n=this._callHandler(t,i,o,r);if(!o._isFollowing())if(n===f||n===o||n===l){var s=n===o?C():n.e,c=R(s)?s:new Error(s+"");n!==l&&o._attachExtraTrace(c),o._rejectUnchecked(s,c)}else{var u=a(n,o);if(u instanceof e){if(u.isRejected()&&!u._isCarryingStackTrace()&&!R(u._settledValue)){var c=new Error(u._settledValue+"");o._attachExtraTrace(c),u._setCarriedStackTrace(c)}o._follow(u),o._propagateFrom(u,1)}else o._fulfillUnchecked(n)}},e.prototype._follow=function(e){this._setFollowing(),e.isPending()?(this._propagateFrom(e,1),e._proxyPromise(this)):e.isFulfilled()?this._fulfillUnchecked(e._settledValue):this._rejectUnchecked(e._settledValue,e._getCarriedStackTrace()),e._isRejectionUnhandled()&&e._unsetRejectionIsUnhandled(),q&&null==e._traceParent&&(e._traceParent=this)},e.prototype._tryFollow=function(t){if(this._isFollowingOrFulfilledOrRejected()||t===this)return!1;var i=a(t,void 0);return i instanceof e?(this._follow(i),!0):!1},e.prototype._resetTrace=function(){q&&(this._trace=new u(void 0===this._peekContext()))},e.prototype._setTrace=function(e){if(q){var t=this._peekContext();this._traceParent=t;var i=void 0===t;this._trace=void 0!==e&&e._traceParent===t?e._trace:new u(i)}return this},e.prototype._attachExtraTrace=function(e){if(q){var t=this,i=e.stack;i="string"==typeof i?i.split("\n"):[],u.protectErrorMessageNewlines(i);for(var r=1,o=1;null!=t&&null!=t._trace;)i=u.combine(i,t._trace.stack.split("\n")),t=t._traceParent,o++;var n=Error.stackTraceLimit||10,s=(n+r)*o,l=i.length;l>s&&(i.length=s),l>0&&(i[0]=i[0].split("\x00").join("\n")),e.stack=i.length<=r?"(No stack trace)":i.join("\n")}},e.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},e.prototype._propagateFrom=function(e,t){(1&t)>0&&e._cancellable()&&(this._setCancellable(),this._cancellationParent=e),(4&t)>0&&this._setBoundTo(e._boundTo),(2&t)>0&&this._setTrace(e)},e.prototype._fulfill=function(e){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(e)},e.prototype._reject=function(e,t){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(e,t)},e.prototype._settlePromiseAt=function(t){var i=this.isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),r=this._settledValue,o=this._receiverAt(t),n=this._promiseAt(t);if("function"==typeof i)this._settlePromiseFromHandler(i,o,r,n);else{var s=!1,l=this.isFulfilled();void 0!==o&&(o instanceof e&&o._isProxied()?(o._unsetProxied(),l?o._fulfillUnchecked(r):o._rejectUnchecked(r,this._getCarriedStackTrace()),s=!0):o instanceof c&&(l?o._promiseFulfilled(r,n):o._promiseRejected(r,n),s=!0)),s||(l?n._fulfill(r):n._reject(r,this._getCarriedStackTrace()))}t>=4&&this._queueGC()},e.prototype._isProxied=function(){return 4194304===(4194304&this._bitField)},e.prototype._setProxied=function(){this._bitField=4194304|this._bitField},e.prototype._unsetProxied=function(){this._bitField=-4194305&this._bitField},e.prototype._isGcQueued=function(){return-1073741824===(-1073741824&this._bitField)},e.prototype._setGcQueued=function(){this._bitField=-1073741824|this._bitField},e.prototype._unsetGcQueued=function(){this._bitField=1073741823&this._bitField},e.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),r.invokeLater(this._gc,this,void 0))},e.prototype._gc=function(){for(var e=5*this._length()-5,t=0;e>t;t++)delete this[t];this._clearFirstHandlerData(),this._setLength(0),this._unsetGcQueued()},e.prototype._clearFirstHandlerData=function(){this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0},e.prototype._queueSettleAt=function(e){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),r.invoke(this._settlePromiseAt,this,e)},e.prototype._fulfillUnchecked=function(e){if(this.isPending()){if(e===this){var t=C();return this._attachExtraTrace(t),this._rejectUnchecked(t,void 0)}this._cleanValues(),this._setFulfilled(),this._settledValue=e;var i=this._length();i>0&&r.invoke(this._settlePromises,this,i)}},e.prototype._rejectUncheckedCheckError=function(e){var t=R(e)?e:new Error(e+"");this._rejectUnchecked(e,t===e?void 0:t)},e.prototype._rejectUnchecked=function(e,t){if(this.isPending()){if(e===this){var i=C();return this._attachExtraTrace(i),this._rejectUnchecked(i)}if(this._cleanValues(),this._setRejected(),this._settledValue=e,this._isFinal())return void r.invokeLater(T,void 0,void 0===t?e:t);var o=this._length();void 0!==t&&this._setCarriedStackTrace(t),o>0?r.invoke(this._rejectPromises,this,null):this._ensurePossibleRejectionHandled()}},e.prototype._rejectPromises=function(){this._settlePromises(),this._unsetCarriedStackTrace()},e.prototype._settlePromises=function(){for(var e=this._length(),t=0;e>t;t++)this._settlePromiseAt(t)},e.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),void 0!==u.possiblyUnhandledRejection&&r.invokeLater(this._notifyUnhandledRejection,this,void 0)},e.prototype._notifyUnhandledRejectionIsHandled=function(){"function"==typeof U&&r.invokeLater(U,void 0,this)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue,t=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified(),void 0!==t&&(this._unsetCarriedStackTrace(),e=t),"function"==typeof u.possiblyUnhandledRejection&&u.possiblyUnhandledRejection(e,this)}};var E=[];return e.prototype._peekContext=function(){var e=E.length-1;return e>=0?E[e]:void 0},e.prototype._pushContext=function(){q&&E.push(this)},e.prototype._popContext=function(){q&&E.pop()},e.noConflict=function(){return noConflict(e)},e.setScheduler=function(e){if("function"!=typeof e)throw new F("fn must be a function");r._schedule=e},u.isSupported()||(e.longStackTraces=function(){},q=!1),e._makeSelfResolutionError=C,require("./finally.js")(e,l,a),require("./direct_resolve.js")(e),require("./synchronous_inspection.js")(e),require("./join.js")(e,c,a,n),e.RangeError=j,e.CancellationError=b,e.TimeoutError=m,e.TypeError=F,e.OperationalError=g,e.RejectionError=g,e.AggregateError=o.AggregateError,i.toFastProperties(e),i.toFastProperties(e.prototype),e.Promise=e,require("./timers.js")(e,n,a),require("./race.js")(e,n,a),require("./call_get.js")(e),require("./generators.js")(e,P,n,a),require("./map.js")(e,c,P,a,n),require("./nodeify.js")(e),require("./promisify.js")(e,n),require("./props.js")(e,c,a),require("./reduce.js")(e,c,P,a,n),require("./settle.js")(e,c),require("./some.js")(e,c,P),require("./progress.js")(e,c),require("./cancel.js")(e,n),require("./filter.js")(e,n),require("./any.js")(e,c),require("./each.js")(e,n),require("./using.js")(e,P,a),e.prototype=e.prototype,e};
}).call(this,require("FWaASH"))
},{"./any.js":1,"./async.js":2,"./call_get.js":4,"./cancel.js":5,"./captured_trace.js":6,"./catch_filter.js":7,"./direct_resolve.js":8,"./each.js":9,"./errors.js":10,"./errors_api_rejection":11,"./filter.js":13,"./finally.js":14,"./generators.js":15,"./join.js":16,"./map.js":17,"./nodeify.js":18,"./progress.js":19,"./promise_array.js":21,"./promise_resolver.js":22,"./promisify.js":23,"./props.js":24,"./race.js":26,"./reduce.js":27,"./settle.js":29,"./some.js":30,"./synchronous_inspection.js":31,"./thenables.js":32,"./timers.js":33,"./using.js":34,"./util.js":35,"FWaASH":42}],21:[function(require,module,exports){
"use strict";module.exports=function(e,t,s){function i(e){switch(e){case-1:return void 0;case-2:return[];case-3:return{}}}function r(s){var i=this._promise=new e(t),r=void 0;s instanceof e&&(r=s,i._propagateFrom(r,5)),i._setTrace(r),this._values=s,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var o=require("./errors.js").canAttach,n=require("./util.js"),l=n.isArray;return r.prototype.length=function(){return this._length},r.prototype.promise=function(){return this._promise},r.prototype._init=function _(t,r){var o=s(this._values,void 0);if(o instanceof e){if(this._values=o,o._setBoundTo(this._promise._boundTo),!o.isFulfilled())return o.isPending()?void o._then(_,this._reject,void 0,this,r):(o._unsetRejectionIsUnhandled(),void this._reject(o._settledValue));if(o=o._settledValue,!l(o)){var n=new e.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(n)}}else if(!l(o)){var n=new e.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(n)}if(0===o.length)return void(-5===r?this._resolveEmptyArray():this._resolve(i(r)));for(var a=this.getActualLength(o.length),u=a,h=this.shouldCopyValues()?new Array(a):this._values,p=!1,c=0;a>c;++c){var d=s(o[c],void 0);d instanceof e?d.isPending()?d._proxyPromiseArray(this,c):(d._unsetRejectionIsUnhandled(),p=!0):p=!0,h[c]=d}this._values=h,this._length=u,p&&this._scanDirectValues(a)},r.prototype._settlePromiseAt=function(t){var s=this._values[t];s instanceof e?s.isFulfilled()?this._promiseFulfilled(s._settledValue,t):s.isRejected()&&this._promiseRejected(s._settledValue,t):this._promiseFulfilled(s,t)},r.prototype._scanDirectValues=function(e){for(var t=0;e>t&&!this._isResolved();++t)this._settlePromiseAt(t)},r.prototype._isResolved=function(){return null===this._values},r.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},r.prototype.__hardReject__=r.prototype._reject=function(e){this._values=null;var t=o(e)?e:new Error(e+"");this._promise._attachExtraTrace(t),this._promise._reject(e,t)},r.prototype._promiseProgressed=function(e,t){this._isResolved()||this._promise._progress({index:t,value:e})},r.prototype._promiseFulfilled=function(e,t){if(!this._isResolved()){this._values[t]=e;var s=++this._totalResolved;s>=this._length&&this._resolve(this._values)}},r.prototype._promiseRejected=function(e){this._isResolved()||(this._totalResolved++,this._reject(e))},r.prototype.shouldCopyValues=function(){return!0},r.prototype.getActualLength=function(e){return e},r};
},{"./errors.js":10,"./util.js":35}],22:[function(require,module,exports){
"use strict";function isUntypedError(r){return r instanceof Error&&es5.getPrototypeOf(r)===Error.prototype}function wrapAsOperationalError(r){var e;return e=isUntypedError(r)?new OperationalError(r):r,errors.markAsOriginatingFromRejection(e),e}function nodebackForPromise(r){function e(e,o){if(null!==r){if(e){var t=wrapAsOperationalError(maybeWrapAsError(e));r._attachExtraTrace(t),r._reject(t)}else if(arguments.length>2){for(var s=arguments.length,i=new Array(s-1),n=1;s>n;++n)i[n-1]=arguments[n];r._fulfill(i)}else r._fulfill(o);r=null}}return e}var util=require("./util.js"),maybeWrapAsError=util.maybeWrapAsError,errors=require("./errors.js"),TimeoutError=errors.TimeoutError,OperationalError=errors.OperationalError,async=require("./async.js"),haveGetters=util.haveGetters,es5=require("./es5.js"),PromiseResolver;if(PromiseResolver=haveGetters?function(r){this.promise=r}:function(r){this.promise=r,this.asCallback=nodebackForPromise(r),this.callback=this.asCallback},haveGetters){var prop={get:function(){return nodebackForPromise(this.promise)}};es5.defineProperty(PromiseResolver.prototype,"asCallback",prop),es5.defineProperty(PromiseResolver.prototype,"callback",prop)}PromiseResolver._nodebackForPromise=nodebackForPromise,PromiseResolver.prototype.toString=function(){return"[object PromiseResolver]"},PromiseResolver.prototype.resolve=PromiseResolver.prototype.fulfill=function(r){if(!(this instanceof PromiseResolver))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var e=this.promise;e._tryFollow(r)||async.invoke(e._fulfill,e,r)},PromiseResolver.prototype.reject=function(r){if(!(this instanceof PromiseResolver))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var e=this.promise;errors.markAsOriginatingFromRejection(r);var o=errors.canAttach(r)?r:new Error(r+"");e._attachExtraTrace(o),async.invoke(e._reject,e,r),o!==r&&async.invoke(this._setCarriedStackTrace,this,o)},PromiseResolver.prototype.progress=function(r){if(!(this instanceof PromiseResolver))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");async.invoke(this.promise._progress,this.promise,r)},PromiseResolver.prototype.cancel=function(){async.invoke(this.promise.cancel,this.promise,void 0)},PromiseResolver.prototype.timeout=function(){this.reject(new TimeoutError("timeout"))},PromiseResolver.prototype.isResolved=function(){return this.promise.isResolved()},PromiseResolver.prototype.toJSON=function(){return this.promise.toJSON()},PromiseResolver.prototype._setCarriedStackTrace=function(r){this.promise.isRejected()&&this.promise._setCarriedStackTrace(r)},module.exports=PromiseResolver;
},{"./async.js":2,"./errors.js":10,"./es5.js":12,"./util.js":35}],23:[function(require,module,exports){
"use strict";module.exports=function(r,e){function n(r){return r.replace(/([$])/,"\\$")}function t(r){try{return r.__isPromisified__===!0}catch(e){return!1}}function a(r,e,n){var a=g.getDataPropertyOrDefault(r,e+n,C);return a?t(a):!1}function i(r,e,n){for(var t=0;t<r.length;t+=2){var a=r[t];if(n.test(a))for(var i=a.replace(n,""),o=0;o<r.length;o+=2)if(r[o]===i)throw new k("Cannot promisify an API that has normal methods with '"+e+"'-suffix")}}function o(r,e,n,o){for(var s=g.inheritedDataKeys(r),c=[],f=0;f<s.length;++f){var u=s[f],p=r[u];"function"!=typeof p||t(p)||a(r,u,e)||!o(u,p,r)||c.push(u,p)}return i(c,e,n),c}function s(r){for(var e=[r],n=Math.max(0,r-1-5),t=r-1;t>=n;--t)t!==r&&e.push(t);for(var t=r+1;5>=t;++t)e.push(t);return e}function c(r){return g.filledRange(r,"arguments[","]")}function f(r){return g.filledRange(r,"_arg","")}function u(r){return"number"==typeof r.length?Math.max(Math.min(r.length,1024),0):0}function p(r){return g.isIdentifier(r)?"."+r:"['"+r.replace(/(['\\])/g,"\\$1")+"']"}function l(n,t,a,i,o){function l(r){var e,a=c(r).join(", "),i=r>0?", ":"";return e="string"==typeof n?"                                                          \n                this.method(args, fn);                                       \n                break;                                                       \n            ".replace(".method",p(n)):t===d?"                                                         \n                callback.call(this, args, fn);                               \n                break;                                                       \n            ":void 0!==t?"                                                         \n                callback.call(receiver, args, fn);                           \n                break;                                                       \n            ":"                                                         \n                callback(args, fn);                                          \n                break;                                                       \n            ",e.replace("args",a).replace(", ",i)}function h(){for(var r="",e=0;e<v.length;++e)r+="case "+v[e]+":"+l(v[e]);var a;return a="string"==typeof n?"                                                  \n                this.property.apply(this, args);                             \n            ".replace(".property",p(n)):t===d?"                                                  \n                callback.apply(this, args);                                  \n            ":"                                                  \n                callback.apply(receiver, args);                              \n            ",r+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = fn;                                                    \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",a)}var m=Math.max(0,u(i)-1),v=s(m),w="string"==typeof a&&g.isIdentifier(a)?a+o:"promisified";return new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","                                         \n        var ret = function FunctionName(Parameters) {                        \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._setTrace(void 0);                                       \n            var fn = nodebackForPromise(promise);                            \n            try {                                                            \n                switch(len) {                                                \n                    [CodeForSwitchCase]                                      \n                }                                                            \n            } catch (e) {                                                    \n                var wrapped = maybeWrapAsError(e);                           \n                promise._attachExtraTrace(wrapped);                          \n                promise._reject(wrapped);                                    \n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        ret.__isPromisified__ = true;                                        \n        return ret;                                                          \n        ".replace("FunctionName",w).replace("Parameters",f(m)).replace("[CodeForSwitchCase]",h()))(r,n,t,_,b,y,e)}function h(n,t){function a(){var a=t;t===d&&(a=this),"string"==typeof n&&(n=a[n]);var i=new r(e);i._setTrace(void 0);var o=y(i);try{n.apply(a,_(arguments,o))}catch(s){var c=b(s);i._attachExtraTrace(c),i._reject(c)}return i}return a.__isPromisified__=!0,a}function m(r,e,t,a){for(var i=new RegExp(n(e)+"$"),s=o(r,e,i,t),c=0,f=s.length;f>c;c+=2){var u=s[c],p=s[c+1],l=u+e;r[l]=a===E?E(u,d,u,p,e):a(p)}return g.toFastProperties(r),r}function v(r,e){return E(r,e,void 0,r)}var d={},g=require("./util.js"),y=require("./promise_resolver.js")._nodebackForPromise,_=g.withAppended,b=g.maybeWrapAsError,w=g.canEvaluate,k=require("./errors").TypeError,P="Async",A=function(r,e){return g.isIdentifier(r)&&"_"!==r.charAt(0)&&!g.isClass(e)},C={__isPromisified__:!0},E=w?l:h;r.promisify=function(r,e){if("function"!=typeof r)throw new k("fn must be a function");return t(r)?r:v(r,arguments.length<2?d:e)},r.promisifyAll=function(r,e){if("function"!=typeof r&&"object"!=typeof r)throw new k("the target of promisifyAll must be an object or a function");e=Object(e);var n=e.suffix;"string"!=typeof n&&(n=P);var t=e.filter;"function"!=typeof t&&(t=A);var a=e.promisifier;if("function"!=typeof a&&(a=E),!g.isIdentifier(n))throw new RangeError("suffix must be a valid identifier");for(var i=g.inheritedDataKeys(r,{includeHidden:!0}),o=0;o<i.length;++o){var s=r[i[o]];"constructor"!==i[o]&&g.isClass(s)&&(m(s.prototype,n,t,a),m(s,n,t,a))}return m(r,n,t,a)}};
},{"./errors":10,"./promise_resolver.js":22,"./util.js":35}],24:[function(require,module,exports){
"use strict";module.exports=function(t,e,o){function i(t){for(var e=p.keys(t),o=e.length,i=new Array(2*o),r=0;o>r;++r){var s=e[r];i[r]=t[s],i[r+o]=s}this.constructor$(i)}function r(e){var r,s=o(e,void 0);return u(s)?(r=s instanceof t?s._then(t.props,void 0,void 0,void 0,void 0):new i(s).promise(),s instanceof t&&r._propagateFrom(s,4),r):n("cannot await properties of a non-object")}var s=require("./util.js"),n=require("./errors_api_rejection")(t),u=s.isObject,p=require("./es5.js");s.inherits(i,e),i.prototype._init=function(){this._init$(void 0,-3)},i.prototype._promiseFulfilled=function(t,e){if(!this._isResolved()){this._values[e]=t;var o=++this._totalResolved;if(o>=this._length){for(var i={},r=this.length(),s=0,n=this.length();n>s;++s)i[this._values[s+r]]=this._values[s];this._resolve(i)}}},i.prototype._promiseProgressed=function(t,e){this._isResolved()||this._promise._progress({key:this._values[e+this.length()],value:t})},i.prototype.shouldCopyValues=function(){return!1},i.prototype.getActualLength=function(t){return t>>1},t.prototype.props=function(){return r(this)},t.props=function(t){return r(t)}};
},{"./errors_api_rejection":11,"./es5.js":12,"./util.js":35}],25:[function(require,module,exports){
"use strict";function arrayCopy(t,i,e,h,a){for(var s=0;a>s;++s)e[s+h]=t[s+i]}function Queue(t){this._capacity=t,this._length=0,this._front=0,this._makeCapacity()}Queue.prototype._willBeOverCapacity=function(t){return this._capacity<t},Queue.prototype._pushOne=function(t){var i=this.length();this._checkCapacity(i+1);var e=this._front+i&this._capacity-1;this[e]=t,this._length=i+1},Queue.prototype.push=function(t,i,e){var h=this.length()+3;if(this._willBeOverCapacity(h))return this._pushOne(t),this._pushOne(i),void this._pushOne(e);var a=this._front+h-3;this._checkCapacity(h);var s=this._capacity-1;this[a+0&s]=t,this[a+1&s]=i,this[a+2&s]=e,this._length=h},Queue.prototype.shift=function(){var t=this._front,i=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,i},Queue.prototype.length=function(){return this._length},Queue.prototype._makeCapacity=function(){for(var t=this._capacity,i=0;t>i;++i)this[i]=void 0},Queue.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<3)},Queue.prototype._resizeTo=function(t){var i=this._front,e=this._capacity,h=new Array(e),a=this.length();if(arrayCopy(this,0,h,0,e),this._capacity=t,this._makeCapacity(),this._front=0,e>=i+a)arrayCopy(h,i,this,0,a);else{var s=a-(i+a&e-1);arrayCopy(h,i,this,0,s),arrayCopy(h,0,this,s,a-s)}},module.exports=Queue;
},{}],26:[function(require,module,exports){
"use strict";module.exports=function(r,e,t){function n(n,c){var s=t(n,void 0);if(s instanceof r)return a(s);if(!o(n))return i("expecting an array, a promise or a thenable");var f=new r(e);void 0!==c?f._propagateFrom(c,7):f._setTrace(void 0);for(var v=f._fulfill,l=f._reject,p=0,d=n.length;d>p;++p){var _=n[p];(void 0!==_||u.call(n,p))&&r.cast(_)._then(v,l,void 0,f,null)}return f}var i=require("./errors_api_rejection.js")(r),o=require("./util.js").isArray,a=function(r){return r.then(function(e){return n(e,r)})},u={}.hasOwnProperty;r.race=function(r){return n(r,void 0)},r.prototype.race=function(){return n(this,void 0)}};
},{"./errors_api_rejection.js":11,"./util.js":35}],27:[function(require,module,exports){
"use strict";module.exports=function(t,e,i,s,r){function n(e,i,n,c){this.constructor$(e),this._preservedValues=c===r?[]:null,this._zerothIsAccum=void 0===n,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var u=s(n,void 0),o=!1,h=u instanceof t;h&&(u.isPending()?u._proxyPromiseArray(this,-1):u.isFulfilled()?(n=u.value(),this._gotAccum=!0):(u._unsetRejectionIsUnhandled(),this._reject(u.reason()),o=!0)),h||this._zerothIsAccum||(this._gotAccum=!0),this._callback=i,this._accum=n,o||this._init$(void 0,-5)}function c(t,e,s,r){if("function"!=typeof e)return i("fn must be a function");var c=new n(t,e,s,r);return c.promise()}var u=require("./util.js"),o=u.tryCatch4,h=u.tryCatch3,_=u.errorObj;u.inherits(n,e),n.prototype._init=function(){},n.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},n.prototype._promiseFulfilled=function(e,i){var r=this._values;if(null!==r){var n,c=this.length(),u=this._preservedValues,a=null!==u,l=this._gotAccum,d=this._valuesPhase;if(!d)for(d=this._valuesPhase=Array(c),n=0;c>n;++n)d[n]=0;if(n=d[i],0===i&&this._zerothIsAccum?(l||(this._accum=e,this._gotAccum=l=!0),d[i]=0===n?1:2):-1===i?l||(this._accum=e,this._gotAccum=l=!0):0===n?d[i]=1:(d[i]=2,l&&(this._accum=e)),l){for(var f,m=this._callback,v=this._promise._boundTo,p=this._reducingIndex;c>p;++p)if(n=d[p],2!==n){if(1!==n)return;if(e=r[p],e instanceof t){if(!e.isFulfilled())return e.isPending()?void 0:(e._unsetRejectionIsUnhandled(),this._reject(e.reason()));e=e._settledValue}if(a?(u.push(e),f=h(m,v,e,p,c)):f=o(m,v,this._accum,e,p,c),f===_)return this._reject(f.e);var g=s(f,void 0);if(g instanceof t){if(g.isPending())return d[p]=4,g._proxyPromiseArray(this,p);if(!g.isFulfilled())return g._unsetRejectionIsUnhandled(),this._reject(g.reason());f=g.value()}this._reducingIndex=p+1,this._accum=f}else this._reducingIndex=p+1;this._reducingIndex<c||this._resolve(a?u:this._accum)}}},t.prototype.reduce=function(t,e){return c(this,t,e,null)},t.reduce=function(t,e,i,s){return c(t,e,i,s)}};
},{"./util.js":35}],28:[function(require,module,exports){
(function (process){
"use strict";var schedule,_MutationObserver;if("object"==typeof process&&"string"==typeof process.version)schedule=function(e){process.nextTick(e)};else if("undefined"!=typeof MutationObserver&&(_MutationObserver=MutationObserver)||"undefined"!=typeof WebKitMutationObserver&&(_MutationObserver=WebKitMutationObserver))schedule=function(){var e=document.createElement("div"),t=void 0,o=new _MutationObserver(function(){var e=t;t=void 0,e()});return o.observe(e,{attributes:!0}),function(o){t=o,e.classList.toggle("foo")}}();else{if("undefined"==typeof setTimeout)throw new Error("no async scheduler available");schedule=function(e){setTimeout(e,0)}}module.exports=schedule;
}).call(this,require("FWaASH"))
},{"FWaASH":42}],29:[function(require,module,exports){
"use strict";module.exports=function(e,t){function i(e){this.constructor$(e)}var s=e.PromiseInspection,o=require("./util.js");o.inherits(i,t),i.prototype._promiseResolved=function(e,t){this._values[e]=t;var i=++this._totalResolved;i>=this._length&&this._resolve(this._values)},i.prototype._promiseFulfilled=function(e,t){if(!this._isResolved()){var i=new s;i._bitField=268435456,i._settledValue=e,this._promiseResolved(t,i)}},i.prototype._promiseRejected=function(e,t){if(!this._isResolved()){var i=new s;i._bitField=134217728,i._settledValue=e,this._promiseResolved(t,i)}},e.settle=function(e){return new i(e).promise()},e.prototype.settle=function(){return new i(this).promise()}};
},{"./util.js":35}],30:[function(require,module,exports){
"use strict";module.exports=function(t,i,e){function s(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,i){if((0|i)!==i||0>i)return e("expecting a positive integer");var o=new s(t),n=o.promise();return n.isRejected()?n:(o.setHowMany(i),o.init(),n)}var n=require("./util.js"),r=require("./errors.js").RangeError,h=require("./errors.js").AggregateError,l=n.isArray;n.inherits(s,i),s.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},s.prototype.init=function(){this._initialized=!0,this._init()},s.prototype.setUnwrap=function(){this._unwrap=!0},s.prototype.howMany=function(){return this._howMany},s.prototype.setHowMany=function(t){this._isResolved()||(this._howMany=t)},s.prototype._promiseFulfilled=function(t){this._isResolved()||(this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),this._resolve(1===this.howMany()&&this._unwrap?this._values[0]:this._values)))},s.prototype._promiseRejected=function(t){if(!this._isResolved()&&(this._addRejected(t),this.howMany()>this._canPossiblyFulfill())){for(var i=new h,e=this.length();e<this._values.length;++e)i.push(this._values[e]);this._reject(i)}},s.prototype._fulfilled=function(){return this._totalResolved},s.prototype._rejected=function(){return this._values.length-this.length()},s.prototype._addRejected=function(t){this._values.push(t)},s.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},s.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},s.prototype._getRangeError=function(t){var i="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new r(i)},s.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,i){return o(t,i)},t.prototype.some=function(t){return o(this,t)},t._SomePromiseArray=s};
},{"./errors.js":10,"./util.js":35}],31:[function(require,module,exports){
"use strict";module.exports=function(e){function t(e){void 0!==e?(this._bitField=e._bitField,this._settledValue=e.isResolved()?e._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}t.prototype.isFulfilled=e.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},t.prototype.isRejected=e.prototype.isRejected=function(){return(134217728&this._bitField)>0},t.prototype.isPending=e.prototype.isPending=function(){return 0===(402653184&this._bitField)},t.prototype.value=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise");return this._settledValue},t.prototype.error=t.prototype.reason=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise");return this._settledValue},t.prototype.isResolved=e.prototype.isResolved=function(){return(402653184&this._bitField)>0},e.PromiseInspection=t};
},{}],32:[function(require,module,exports){
"use strict";module.exports=function(r,e){function t(r){try{return r.then}catch(e){return u.e=e,u}}function n(n,i){if(f(n)){if(n instanceof r)return n;if(o(n)){var s=new r(e);return s._setTrace(void 0),n._then(s._fulfillUnchecked,s._rejectUncheckedCheckError,s._progressUnchecked,s,null),s._setFollowing(),s}var _=t(n);if(_===u)return void 0!==i&&a(_.e)&&i._attachExtraTrace(_.e),r.reject(_.e);if("function"==typeof _)return c(n,_,i)}return n}function o(r){return s.call(r,"_promise0")}function c(e,t,n){function o(t){if(!f){if(f=!0,e===t){var o=r._makeSelfResolutionError();return void 0!==n&&n._attachExtraTrace(o),void u.promise._reject(o,void 0)}u.resolve(t)}}function c(r){if(!f){f=!0;var e=a(r)?r:new Error(r+"");void 0!==n&&n._attachExtraTrace(e),u.promise._reject(r,e)}}function i(r){if(!f){var e=u.promise;"function"==typeof e._progress&&e._progress(r)}}var u=r.defer(),f=!1;try{t.call(e,o,c,i)}catch(s){if(!f){f=!0;var _=a(s)?s:new Error(s+"");void 0!==n&&n._attachExtraTrace(_),u.promise._reject(s,_)}}return u.promise}var i=require("./util.js"),a=require("./errors.js").canAttach,u=i.errorObj,f=i.isObject,s={}.hasOwnProperty;return n};
},{"./errors.js":10,"./util.js":35}],33:[function(require,module,exports){
"use strict";var _setTimeout=function(e,t){var r=arguments.length,o=arguments[2],n=arguments[3],i=r>=5?arguments[4]:void 0;setTimeout(function(){e(o,n,i)},0|t)};module.exports=function(e,t,r){var o=(require("./util.js"),require("./errors.js")),n=(require("./errors_api_rejection")(e),e.TimeoutError),i=function(e,t,r){if(e.isPending()){"string"!=typeof t&&(t="operation timed out after "+r+" ms");var i=new n(t);o.markAsOriginatingFromRejection(i),e._attachExtraTrace(i),e._cancel(i)}},a=function(e,t){t._fulfill(e)},u=e.delay=function(o,n){void 0===n&&(n=o,o=void 0),n=+n;var i=r(o,void 0),u=new e(t);return i instanceof e?(u._propagateFrom(i,7),u._follow(i),u.then(function(t){return e.delay(t,n)})):(u._setTrace(void 0),_setTimeout(a,n,o,u),u)};e.prototype.delay=function(e){return u(this,e)},e.prototype.timeout=function(r,o){r=+r;var n=new e(t);return n._propagateFrom(this,7),n._follow(this),_setTimeout(i,r,n,o,r),n.cancellable()}};
},{"./errors.js":10,"./errors_api_rejection":11,"./util.js":35}],34:[function(require,module,exports){
"use strict";module.exports=function(t,e,i){function r(e){for(var i=e.length,r=0;i>r;++r){var s=e[r];if(s.isRejected())return t.reject(s.error());e[r]=s.value()}return e}function s(t){setTimeout(function(){throw t},0)}function n(t){var e=i(t,void 0);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function o(e,r){function o(){if(u>=p)return a.resolve();var f=n(e[u++]);if(f instanceof t&&f._isDisposable()){try{f=i(f._getDisposer().tryDispose(r),void 0)}catch(l){return s(l)}if(f instanceof t)return f._then(o,s,null,null,null)}o()}var u=0,p=e.length,a=t.defer();return o(),a.promise}function u(t){var e=new h;return e._settledValue=t,e._bitField=268435456,o(this,e).thenReturn(t)}function p(t){var e=new h;return e._settledValue=t,e._bitField=134217728,o(this,e).thenThrow(t)}function a(t,e){this._data=t,this._promise=e}function f(t,e){this.constructor$(t,e)}var l=require("./errors.js").TypeError,c=require("./util.js").inherits,h=t.PromiseInspection;a.prototype.data=function(){return this._data},a.prototype.promise=function(){return this._promise},a.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},a.prototype.tryDispose=function(t){var e=this.resource(),i=null!==e?this.doDispose(e,t):null;return this._promise._unsetDisposable(),this._data=this._promise=null,i},a.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},c(f,a),f.prototype.doDispose=function(t,e){var i=this.data();return i.call(t,t,e)},t.using=function(){var i=arguments.length;if(2>i)return e("you must pass at least 2 arguments to Promise.using");var s=arguments[i-1];if("function"!=typeof s)return e("fn must be a function");i--;for(var n=new Array(i),o=0;i>o;++o){var f=arguments[o];if(a.isDisposer(f)){var l=f;f=f.promise(),f._setDisposable(l)}n[o]=f}return t.settle(n).then(r).spread(s)._then(u,p,void 0,n,void 0)},t.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},t.prototype._isDisposable=function(){return(262144&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},t.prototype.disposer=function(t){if("function"==typeof t)return new f(t,this);throw new l}};
},{"./errors.js":10,"./util.js":35}],35:[function(require,module,exports){
"use strict";function tryCatch1(r,t,e){try{return r.call(t,e)}catch(n){return errorObj.e=n,errorObj}}function tryCatch2(r,t,e,n){try{return r.call(t,e,n)}catch(i){return errorObj.e=i,errorObj}}function tryCatch3(r,t,e,n,i){try{return r.call(t,e,n,i)}catch(a){return errorObj.e=a,errorObj}}function tryCatch4(r,t,e,n,i,a){try{return r.call(t,e,n,i,a)}catch(o){return errorObj.e=o,errorObj}}function tryCatchApply(r,t,e){try{return r.apply(e,t)}catch(n){return errorObj.e=n,errorObj}}function asString(r){return"string"==typeof r?r:""+r}function isPrimitive(r){return null==r||r===!0||r===!1||"string"==typeof r||"number"==typeof r}function isObject(r){return!isPrimitive(r)}function maybeWrapAsError(r){return isPrimitive(r)?new Error(asString(r)):r}function withAppended(r,t){var e,n=r.length,i=new Array(n+1);for(e=0;n>e;++e)i[e]=r[e];return i[e]=t,i}function getDataPropertyOrDefault(r,t,e){if(!es5.isES5)return{}.hasOwnProperty.call(r,t)?r[t]:void 0;var n=Object.getOwnPropertyDescriptor(r,t);return null!=n?null==n.get&&null==n.set?n.value:e:void 0}function notEnumerableProp(r,t,e){if(isPrimitive(r))return r;var n={value:e,configurable:!0,enumerable:!1,writable:!0};return es5.defineProperty(r,t,n),r}function thrower(r){throw r}function isClass(r){try{if("function"==typeof r){var t=es5.keys(r.prototype);return t.length>0&&!(1===t.length&&"constructor"===t[0])}return!1}catch(e){return!1}}function toFastProperties(r){function t(){}return t.prototype=r,t}function isIdentifier(r){return rident.test(r)}function filledRange(r,t,e){for(var n=new Array(r),i=0;r>i;++i)n[i]=t+i+e;return n}var es5=require("./es5.js"),haveGetters=function(){try{var r={};return es5.defineProperty(r,"f",{get:function(){return 3}}),3===r.f}catch(t){return!1}}(),canEvaluate="undefined"==typeof navigator,errorObj={e:{}},inherits=function(r,t){function e(){this.constructor=r,this.constructor$=t;for(var e in t.prototype)n.call(t.prototype,e)&&"$"!==e.charAt(e.length-1)&&(this[e+"$"]=t.prototype[e])}var n={}.hasOwnProperty;return e.prototype=t.prototype,r.prototype=new e,r.prototype},wrapsPrimitiveReceiver=function(){return"string"!==this}.call("string"),inheritedDataKeys=function(){return es5.isES5?function(r,t){for(var e=[],n=Object.create(null),i=Object(t).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=r;){var a;try{a=i(r)}catch(o){return e}for(var u=0;u<a.length;++u){var c=a[u];if(!n[c]){n[c]=!0;var s=Object.getOwnPropertyDescriptor(r,c);null!=s&&null==s.get&&null==s.set&&e.push(c)}}r=es5.getPrototypeOf(r)}return e}:function(r){var t=[];for(var e in r)t.push(e);return t}}(),rident=/^[a-z$_][a-z$_0-9]*$/i,ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,haveGetters:haveGetters,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch1:tryCatch1,tryCatch2:tryCatch2,tryCatch3:tryCatch3,tryCatch4:tryCatch4,tryCatchApply:tryCatchApply,inherits:inherits,withAppended:withAppended,asString:asString,maybeWrapAsError:maybeWrapAsError,wrapsPrimitiveReceiver:wrapsPrimitiveReceiver,toFastProperties:toFastProperties,filledRange:filledRange};module.exports=ret;
},{"./es5.js":12}],36:[function(require,module,exports){
function Buffer(t,e,r){if(!(this instanceof Buffer))return new Buffer(t,e,r);var n,i=typeof t;if("number"===i)n=t>0?t>>>0:0;else if("string"===i)"base64"===e&&(t=base64clean(t)),n=Buffer.byteLength(t,e);else{if("object"!==i||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&isArray(t.data)&&(t=t.data),n=+t.length>0?Math.floor(+t.length):0}if(this.length>kMaxLength)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength.toString(16)+" bytes");var f;Buffer.TYPED_ARRAY_SUPPORT?f=Buffer._augment(new Uint8Array(n)):(f=this,f.length=n,f._isBuffer=!0);var o;if(Buffer.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)f._set(t);else if(isArrayish(t))if(Buffer.isBuffer(t))for(o=0;n>o;o++)f[o]=t.readUInt8(o);else for(o=0;n>o;o++)f[o]=(t[o]%256+256)%256;else if("string"===i)f.write(t,0,e);else if("number"===i&&!Buffer.TYPED_ARRAY_SUPPORT&&!r)for(o=0;n>o;o++)f[o]=0;return f}function hexWrite(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var f=e.length;if(f%2!==0)throw new Error("Invalid hex string");n>f/2&&(n=f/2);for(var o=0;n>o;o++){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[r+o]=u}return o}function utf8Write(t,e,r,n){var i=blitBuffer(utf8ToBytes(e),t,r,n);return i}function asciiWrite(t,e,r,n){var i=blitBuffer(asciiToBytes(e),t,r,n);return i}function binaryWrite(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){var i=blitBuffer(base64ToBytes(e),t,r,n);return i}function utf16leWrite(t,e,r,n){var i=blitBuffer(utf16leToBytes(e),t,r,n);return i}function base64Slice(t,e,r){return base64.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function utf8Slice(t,e,r){var n="",i="";r=Math.min(t.length,r);for(var f=e;r>f;f++)t[f]<=127?(n+=decodeUtf8Char(i)+String.fromCharCode(t[f]),i=""):i+="%"+t[f].toString(16);return n+decodeUtf8Char(i)}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(t[i]);return n}function binarySlice(t,e,r){return asciiSlice(t,e,r)}function hexSlice(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var i="",f=e;r>f;f++)i+=toHex(t[f]);return i}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),i="",f=0;f<n.length;f+=2)i+=String.fromCharCode(n[f]+256*n[f+1]);return i}function checkOffset(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,i,f){if(!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>i||f>e)throw new TypeError("value is out of bounds");if(r+n>t.length)throw new TypeError("index out of range")}function objectWriteUInt16(t,e,r,n){0>e&&(e=65535+e+1);for(var i=0,f=Math.min(t.length-r,2);f>i;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function objectWriteUInt32(t,e,r,n){0>e&&(e=4294967295+e+1);for(var i=0,f=Math.min(t.length-r,4);f>i;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function checkIEEE754(t,e,r,n,i,f){if(e>i||f>e)throw new TypeError("value is out of bounds");if(r+n>t.length)throw new TypeError("index out of range")}function writeFloat(t,e,r,n,i){return i||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,i){return i||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){for(t=stringtrim(t).replace(INVALID_BASE64_RE,"");t.length%4!==0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function isArrayish(t){return isArray(t)||Buffer.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function toHex(t){return 16>t?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);if(127>=n)e.push(n);else{var i=r;n>=55296&&57343>=n&&r++;for(var f=encodeURIComponent(t.slice(i,r+1)).substr(1).split("%"),o=0;o<f.length;o++)e.push(parseInt(f[o],16))}}return e}function asciiToBytes(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t){for(var e,r,n,i=[],f=0;f<t.length;f++)e=t.charCodeAt(f),r=e>>8,n=e%256,i.push(n),i.push(r);return i}function base64ToBytes(t){return base64.toByteArray(t)}function blitBuffer(t,e,r,n){for(var i=0;n>i&&!(i+r>=e.length||i>=t.length);i++)e[i+r]=t[i];return i}function decodeUtf8Char(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("is-array");exports.Buffer=Buffer,exports.SlowBuffer=Buffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var kMaxLength=1073741823;Buffer.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}(),Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");for(var r=t.length,n=e.length,i=0,f=Math.min(r,n);f>i&&t[i]===e[i];i++);return i!==f&&(r=t[i],n=e[i]),n>r?-1:r>n?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new Buffer(0);if(1===t.length)return t[0];var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new Buffer(e),i=0;for(r=0;r<t.length;r++){var f=t[r];f.copy(n,i),i+=f.length}return n},Buffer.byteLength=function(t,e){var r;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":r=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;case"hex":r=t.length>>>1;break;case"utf8":case"utf-8":r=utf8ToBytes(t).length;break;case"base64":r=base64ToBytes(t).length;break;default:r=t.length}return r},Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0,Buffer.prototype.toString=function(t,e,r){var n=!1;if(e>>>=0,r=void 0===r||1/0===r?this.length:r>>>0,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"binary":return binarySlice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return 0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return Buffer.compare(this,t)},Buffer.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},Buffer.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},Buffer.prototype.write=function(t,e,r,n){if(isFinite(e))isFinite(r)||(n=r,r=void 0);else{var i=n;n=e,e=r,r=i}e=Number(e)||0;var f=this.length-e;r?(r=Number(r),r>f&&(r=f)):r=f,n=String(n||"utf8").toLowerCase();var o;switch(n){case"hex":o=hexWrite(this,t,e,r);break;case"utf8":case"utf-8":o=utf8Write(this,t,e,r);break;case"ascii":o=asciiWrite(this,t,e,r);break;case"binary":o=binaryWrite(this,t,e,r);break;case"base64":o=base64Write(this,t,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=utf16leWrite(this,t,e,r);break;default:throw new TypeError("Unknown encoding: "+n)}return o},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.slice=function(t,e){var r=this.length;if(t=~~t,e=void 0===e?r:~~e,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),t>e&&(e=t),Buffer.TYPED_ARRAY_SUPPORT)return Buffer._augment(this.subarray(t,e));for(var n=e-t,i=new Buffer(n,void 0,!0),f=0;n>f;f++)i[f]=this[f+t];return i},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||checkInt(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){var i=this;if(r||(r=0),n||0===n||(n=this.length),e||(e=0),n!==r&&0!==t.length&&0!==i.length){if(r>n)throw new TypeError("sourceEnd < sourceStart");if(0>e||e>=t.length)throw new TypeError("targetStart out of bounds");if(0>r||r>=i.length)throw new TypeError("sourceStart out of bounds");if(0>n||n>i.length)throw new TypeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f=n-r;if(100>f||!Buffer.TYPED_ARRAY_SUPPORT)for(var o=0;f>o;o++)t[o+e]=this[o+r];else t._set(this.subarray(r,r+f),e)}},Buffer.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new TypeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new TypeError("start out of bounds");if(0>r||r>this.length)throw new TypeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var i=utf8ToBytes(t.toString()),f=i.length;for(n=e;r>n;n++)this[n]=i[n%f]}return this}},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=BP.get,t.set=BP.set,t.write=BP.write,t.toString=BP.toString,t.toLocaleString=BP.toString,t.toJSON=BP.toJSON,t.equals=BP.equals,t.compare=BP.compare,t.copy=BP.copy,t.slice=BP.slice,t.readUInt8=BP.readUInt8,t.readUInt16LE=BP.readUInt16LE,t.readUInt16BE=BP.readUInt16BE,t.readUInt32LE=BP.readUInt32LE,t.readUInt32BE=BP.readUInt32BE,t.readInt8=BP.readInt8,t.readInt16LE=BP.readInt16LE,t.readInt16BE=BP.readInt16BE,t.readInt32LE=BP.readInt32LE,t.readInt32BE=BP.readInt32BE,t.readFloatLE=BP.readFloatLE,t.readFloatBE=BP.readFloatBE,t.readDoubleLE=BP.readDoubleLE,t.readDoubleBE=BP.readDoubleBE,t.writeUInt8=BP.writeUInt8,t.writeUInt16LE=BP.writeUInt16LE,t.writeUInt16BE=BP.writeUInt16BE,t.writeUInt32LE=BP.writeUInt32LE,t.writeUInt32BE=BP.writeUInt32BE,t.writeInt8=BP.writeInt8,t.writeInt16LE=BP.writeInt16LE,t.writeInt16BE=BP.writeInt16BE,t.writeInt32LE=BP.writeInt32LE,t.writeInt32BE=BP.writeInt32BE,t.writeFloatLE=BP.writeFloatLE,t.writeFloatBE=BP.writeFloatBE,t.writeDoubleLE=BP.writeDoubleLE,t.writeDoubleBE=BP.writeDoubleBE,t.fill=BP.fill,t.inspect=BP.inspect,t.toArrayBuffer=BP.toArrayBuffer,t};var INVALID_BASE64_RE=/[^+\/0-9A-z]/g;
},{"base64-js":37,"ieee754":38,"is-array":39}],37:[function(require,module,exports){
var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h?62:r===c?63:o>r?-1:o+10>r?r-o+26+26:i+26>r?r-i:A+26>r?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;c>n;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}function e(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}var n,a,h,c=t.length%3,o="";for(n=0,h=t.length-c;h>n;n+=3)a=(t[n]<<16)+(t[n+1]<<8)+t[n+2],o+=e(a);switch(c){case 1:a=t[t.length-1],o+=r(a>>2),o+=r(a<<4&63),o+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],o+=r(a>>10),o+=r(a>>4&63),o+=r(a<<2&63),o+="="}return o}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);
},{}],38:[function(require,module,exports){
exports.read=function(o,t,a,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,n=a?h-1:0,s=a?-1:1,N=o[t+n];for(n+=s,M=N&(1<<-i)-1,N>>=-i,i+=w;i>0;M=256*M+o[t+n],n+=s,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+o[t+n],n+=s,i-=8);if(0===M)M=1-e;else{if(M===f)return p?0/0:1/0*(N?-1:1);p+=Math.pow(2,r),M-=e}return(N?-1:1)*p*Math.pow(2,M-r)},exports.write=function(o,t,a,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,n=i>>1,s=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,N=r?0:M-1,u=r?1:-1,l=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(w=isNaN(t)?1:0,p=i):(p=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-p))<1&&(p--,f*=2),t+=p+n>=1?s/f:s*Math.pow(2,1-n),t*f>=2&&(p++,f/=2),p+n>=i?(w=0,p=i):p+n>=1?(w=(t*f-1)*Math.pow(2,h),p+=n):(w=t*Math.pow(2,n-1)*Math.pow(2,h),p=0));h>=8;o[a+N]=255&w,N+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;o[a+N]=255&p,N+=u,p/=256,e-=8);o[a+N-u]|=128*l};
<<<<<<< HEAD
},{}],4:[function(require,module,exports){
<<<<<<< HEAD
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};
=======
var isArray=Array.isArray,str=Object.prototype.toString;module.exports=isArray||function(r){return!!r&&"[object Array]"==str.call(r)};
>>>>>>> 76f848cf55f5f28f606eff824e5bae729627b8cc
},{}],5:[function(require,module,exports){
=======
},{}],39:[function(require,module,exports){
var isArray=Array.isArray,str=Object.prototype.toString;module.exports=isArray||function(r){return!!r&&"[object Array]"==str.call(r)};
},{}],40:[function(require,module,exports){
>>>>>>> 93356105144fbcd30c84c03b371da5873adf0efa
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};
},{}],41:[function(require,module,exports){
module.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],42:[function(require,module,exports){
function noop(){}var process=module.exports={};process.nextTick=function(){var o="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(o)return function(o){return window.setImmediate(o)};if(e){var s=[];return window.addEventListener("message",function(o){var e=o.source;if((e===window||null===e)&&"process-tick"===o.data&&(o.stopPropagation(),s.length>0)){var n=s.shift();n()}},!0),function(o){s.push(o),window.postMessage("process-tick","*")}}return function(o){setTimeout(o,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(){throw new Error("process.chdir is not supported")};
},{}],43:[function(require,module,exports){
module.exports=require("./lib/_stream_duplex.js");
},{"./lib/_stream_duplex.js":44}],44:[function(require,module,exports){
(function (process){
function Duplex(e){return this instanceof Duplex?(Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",onend)):new Duplex(e)}function onend(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function forEach(e,t){for(var i=0,r=e.length;r>i;i++)t(e[i],i)}module.exports=Duplex;var objectKeys=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t},util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");util.inherits(Duplex,Readable),forEach(objectKeys(Writable.prototype),function(e){Duplex.prototype[e]||(Duplex.prototype[e]=Writable.prototype[e])});
}).call(this,require("FWaASH"))
},{"./_stream_readable":46,"./_stream_writable":48,"FWaASH":42,"core-util-is":49,"inherits":41}],45:[function(require,module,exports){
function PassThrough(r){return this instanceof PassThrough?void Transform.call(this,r):new PassThrough(r)}module.exports=PassThrough;var Transform=require("./_stream_transform"),util=require("core-util-is");util.inherits=require("inherits"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(r,s,i){i(null,r)};
},{"./_stream_transform":47,"core-util-is":49,"inherits":41}],46:[function(require,module,exports){
(function (process){
function ReadableState(e){e=e||{};var t=e.highWaterMark;this.highWaterMark=t||0===t?t:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){return this instanceof Readable?(this._readableState=new ReadableState(e,this),this.readable=!0,void Stream.call(this)):new Readable(e)}function readableAddChunk(e,t,n,r,i){var a=chunkInvalid(t,n);if(a)e.emit("error",a);else if(null===n||void 0===n)t.reading=!1,t.ended||onEofChunk(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var d=new Error("stream.push() after EOF");e.emit("error",d)}else if(t.endEmitted&&i){var d=new Error("stream.unshift() after end event");e.emit("error",d)}else!t.decoder||i||r||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&emitReadable(e),maybeReadMore(e,t);else i||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function roundUpToNextPowerOf2(e){if(e>=MAX_HWM)e=MAX_HWM;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function howMuchToRead(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=roundUpToNextPowerOf2(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function chunkInvalid(e,t){var n=null;return Buffer.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.length>0?emitReadable(e):endReadable(e)}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?process.nextTick(function(){emitReadable_(e)}):emitReadable_(e))}function emitReadable_(e){e.emit("readable")}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(function(){maybeReadMore_(e,t)}))}function maybeReadMore_(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&flow(e)}}function flow(e){function t(e){var t=e.write(n);!1===t&&r.awaitDrain++}var n,r=e._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=e.read());)if(1===r.pipesCount?t(r.pipes,0,null):forEach(r.pipes,t),e.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(EE.listenerCount(e,"data")>0&&emitDataEvents(e))):void(r.ranOut=!0)}function pipeOnReadable(){this._readableState.ranOut&&(this._readableState.ranOut=!1,flow(this))}function emitDataEvents(e,t){var n=e._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var r=t||!1,i=!1;e.readable=!0,e.pipe=Stream.prototype.pipe,e.on=e.addListener=Stream.prototype.on,e.on("readable",function(){i=!0;for(var t;!r&&null!==(t=e.read());)e.emit("data",t);null===t&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){r=!0,this.emit("pause")},e.resume=function(){r=!1,i?process.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function fromList(e,t){var n,r=t.buffer,i=t.length,a=!!t.decoder,d=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(d)n=r.shift();else if(!e||e>=i)n=a?r.join(""):Buffer.concat(r,i),r.length=0;else if(e<r[0].length){var o=r[0];n=o.slice(0,e),r[0]=o.slice(e)}else if(e===r[0].length)n=r.shift();else{n=a?"":new Buffer(e);for(var l=0,s=0,u=r.length;u>s&&e>l;s++){var o=r[0],h=Math.min(e-l,o.length);a?n+=o.slice(0,h):o.copy(n,l,0,h),h<o.length?r[0]=o.slice(h):r.shift(),l+=h}}return n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,process.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function forEach(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function indexOf(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}module.exports=Readable;var isArray=require("isarray"),Buffer=require("buffer").Buffer;Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter;EE.listenerCount||(EE.listenerCount=function(e,t){return e.listeners(t).length});var Stream=require("stream"),util=require("core-util-is");util.inherits=require("inherits");var StringDecoder;util.inherits(Readable,Stream),Readable.prototype.push=function(e,t){var n=this._readableState;return"string"!=typeof e||n.objectMode||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new Buffer(e,t),t="")),readableAddChunk(this,n,e,t,!1)},Readable.prototype.unshift=function(e){var t=this._readableState;return readableAddChunk(this,t,e,"",!0)},Readable.prototype.setEncoding=function(e){StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e};var MAX_HWM=8388608;Readable.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var n,r=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return emitReadable(this),null;if(e=howMuchToRead(e,t),0===e&&t.ended)return n=null,t.length>0&&t.decoder&&(n=fromList(e,t),t.length-=n.length),0===t.length&&endReadable(this),n;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=howMuchToRead(r,t)),n=e>0?fromList(e,t):null,null===n&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&endReadable(this),n},Readable.prototype._read=function(){this.emit("error",new Error("not implemented"))},Readable.prototype.pipe=function(e,t){function n(e){e===s&&i()}function r(){e.end()}function i(){e.removeListener("close",d),e.removeListener("finish",o),e.removeListener("drain",p),e.removeListener("error",a),e.removeListener("unpipe",n),s.removeListener("end",r),s.removeListener("end",i),(!e._writableState||e._writableState.needDrain)&&p()}function a(t){l(),e.removeListener("error",a),0===EE.listenerCount(e,"error")&&e.emit("error",t)}function d(){e.removeListener("finish",o),l()}function o(){e.removeListener("close",d),l()}function l(){s.unpipe(e)}var s=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=e;break;case 1:u.pipes=[u.pipes,e];break;default:u.pipes.push(e)}u.pipesCount+=1;var h=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,f=h?r:i;u.endEmitted?process.nextTick(f):s.once("end",f),e.on("unpipe",n);var p=pipeOnDrain(s);return e.on("drain",p),e._events&&e._events.error?isArray(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",d),e.once("finish",o),e.emit("pipe",s),u.flowing||(this.on("readable",pipeOnReadable),u.flowing=!0,process.nextTick(function(){flow(s)})),e},Readable.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",pipeOnReadable),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",pipeOnReadable),t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=indexOf(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},Readable.prototype.on=function(e,t){var n=Stream.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||emitDataEvents(this),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&emitReadable(this,r):this.read(0))}return n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){emitDataEvents(this),this.read(0),this.emit("resume")},Readable.prototype.pause=function(){emitDataEvents(this,!0),this.emit("pause")},Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var a=r.push(i);a||(n=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var a=["error","close","destroy","pause","resume"];return forEach(a,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(){n&&(n=!1,e.resume())},r},Readable._fromList=fromList;
}).call(this,require("FWaASH"))
},{"FWaASH":42,"buffer":36,"core-util-is":49,"events":40,"inherits":41,"isarray":50,"stream":56,"string_decoder/":51}],47:[function(require,module,exports){
function TransformState(r,t){this.afterTransform=function(r,e){return afterTransform(t,r,e)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function afterTransform(r,t,e){var n=r._transformState;n.transforming=!1;var a=n.writecb;if(!a)return r.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==e&&void 0!==e&&r.push(e),a&&a(t);var i=r._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&r._read(i.highWaterMark)}function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r);var t=(this._transformState=new TransformState(r,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(r){done(t,r)}):done(t)})}function done(r,t){if(t)return r.emit("error",t);var e=r._writableState,n=(r._readableState,r._transformState);if(e.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return r.push(null)}module.exports=Transform;var Duplex=require("./_stream_duplex"),util=require("core-util-is");util.inherits=require("inherits"),util.inherits(Transform,Duplex),Transform.prototype.push=function(r,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,t)},Transform.prototype._transform=function(){throw new Error("not implemented")},Transform.prototype._write=function(r,t,e){var n=this._transformState;if(n.writecb=e,n.writechunk=r,n.writeencoding=t,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},Transform.prototype._read=function(){var r=this._transformState;null!==r.writechunk&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};
},{"./_stream_duplex":44,"core-util-is":49,"inherits":41}],48:[function(require,module,exports){
(function (process){
function WriteReq(e,t,i){this.chunk=e,this.encoding=t,this.callback=i}function WritableState(e,t){e=e||{};var i=e.highWaterMark;this.highWaterMark=i||0===i?i:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=e.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function Writable(e){var t=require("./_stream_duplex");return this instanceof Writable||this instanceof t?(this._writableState=new WritableState(e,this),this.writable=!0,void Stream.call(this)):new Writable(e)}function writeAfterEnd(e,t,i){var r=new Error("write after end");e.emit("error",r),process.nextTick(function(){i(r)})}function validChunk(e,t,i,r){var n=!0;if(!Buffer.isBuffer(i)&&"string"!=typeof i&&null!==i&&void 0!==i&&!t.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");e.emit("error",f),process.nextTick(function(){r(f)}),n=!1}return n}function decodeChunk(e,t,i){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new Buffer(t,i)),t}function writeOrBuffer(e,t,i,r,n){i=decodeChunk(t,i,r),Buffer.isBuffer(i)&&(r="buffer");var f=t.objectMode?1:i.length;t.length+=f;var o=t.length<t.highWaterMark;return o||(t.needDrain=!0),t.writing?t.buffer.push(new WriteReq(i,r,n)):doWrite(e,t,f,i,r,n),o}function doWrite(e,t,i,r,n,f){t.writelen=i,t.writecb=f,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1}function onwriteError(e,t,i,r,n){i?process.nextTick(function(){n(r)}):n(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var i=e._writableState,r=i.sync,n=i.writecb;if(onwriteStateUpdate(i),t)onwriteError(e,i,r,t,n);else{var f=needFinish(e,i);f||i.bufferProcessing||!i.buffer.length||clearBuffer(e,i),r?process.nextTick(function(){afterWrite(e,i,f,n)}):afterWrite(e,i,f,n)}}function afterWrite(e,t,i,r){i||onwriteDrain(e,t),r(),i&&finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;for(var i=0;i<t.buffer.length;i++){var r=t.buffer[i],n=r.chunk,f=r.encoding,o=r.callback,a=t.objectMode?1:n.length;if(doWrite(e,t,a,n,f,o),t.writing){i++;break}}t.bufferProcessing=!1,i<t.buffer.length?t.buffer=t.buffer.slice(i):t.buffer.length=0}function needFinish(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function finishMaybe(e,t){var i=needFinish(e,t);return i&&(t.finished=!0,e.emit("finish")),i}function endWritable(e,t,i){t.ending=!0,finishMaybe(e,t),i&&(t.finished?process.nextTick(i):e.once("finish",i)),t.ended=!0}module.exports=Writable;var Buffer=require("buffer").Buffer;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var Stream=require("stream");util.inherits(Writable,Stream),Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(e,t,i){var r=this._writableState,n=!1;return"function"==typeof t&&(i=t,t=null),Buffer.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof i&&(i=function(){}),r.ended?writeAfterEnd(this,r,i):validChunk(this,r,e,i)&&(n=writeOrBuffer(this,r,e,t,i)),n},Writable.prototype._write=function(e,t,i){i(new Error("not implemented"))},Writable.prototype.end=function(e,t,i){var r=this._writableState;"function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),r.ending||r.finished||endWritable(this,r,i)};
}).call(this,require("FWaASH"))
},{"./_stream_duplex":44,"FWaASH":42,"buffer":36,"core-util-is":49,"inherits":41,"stream":56}],49:[function(require,module,exports){
(function (Buffer){
function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function isBuffer(e){return Buffer.isBuffer(e)}function objectToString(e){return Object.prototype.toString.call(e)}exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=isBuffer;
}).call(this,require("buffer").Buffer)
},{"buffer":36}],50:[function(require,module,exports){
module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};
},{}],51:[function(require,module,exports){
function assertEncoding(e){if(e&&!isBufferEncoding(e))throw new Error("Unknown encoding: "+e)}function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var Buffer=require("buffer").Buffer,isBufferEncoding=Buffer.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},StringDecoder=exports.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var h=t.charCodeAt(t.length-1);if(!(h>=55296&&56319>=h)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,h=t.charCodeAt(i);if(h>=55296&&56319>=h){var c=this.surrogateSize;return this.charLength+=c,this.charReceived+=c,this.charBuffer.copy(this.charBuffer,c,0,c),e.copy(this.charBuffer,0,0,c),t.substring(0,i)}return t},StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}this.charReceived=t},StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,h=this.charBuffer,i=this.encoding;t+=h.slice(0,r).toString(i)}return t};
},{"buffer":36}],52:[function(require,module,exports){
module.exports=require("./lib/_stream_passthrough.js");
},{"./lib/_stream_passthrough.js":45}],53:[function(require,module,exports){
exports=module.exports=require("./lib/_stream_readable.js"),exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js");
},{"./lib/_stream_duplex.js":44,"./lib/_stream_passthrough.js":45,"./lib/_stream_readable.js":46,"./lib/_stream_transform.js":47,"./lib/_stream_writable.js":48}],54:[function(require,module,exports){
module.exports=require("./lib/_stream_transform.js");
},{"./lib/_stream_transform.js":47}],55:[function(require,module,exports){
module.exports=require("./lib/_stream_writable.js");
},{"./lib/_stream_writable.js":48}],56:[function(require,module,exports){
function Stream(){EE.call(this)}module.exports=Stream;var EE=require("events").EventEmitter,inherits=require("inherits");inherits(Stream,EE),Stream.Readable=require("readable-stream/readable.js"),Stream.Writable=require("readable-stream/writable.js"),Stream.Duplex=require("readable-stream/duplex.js"),Stream.Transform=require("readable-stream/transform.js"),Stream.PassThrough=require("readable-stream/passthrough.js"),Stream.Stream=Stream,Stream.prototype.pipe=function(e,r){function t(r){e.writable&&!1===e.write(r)&&m.pause&&m.pause()}function n(){m.readable&&m.resume&&m.resume()}function a(){u||(u=!0,e.end())}function o(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function i(e){if(s(),0===EE.listenerCount(this,"error"))throw e}function s(){m.removeListener("data",t),e.removeListener("drain",n),m.removeListener("end",a),m.removeListener("close",o),m.removeListener("error",i),e.removeListener("error",i),m.removeListener("end",s),m.removeListener("close",s),e.removeListener("close",s)}var m=this;m.on("data",t),e.on("drain",n),e._isStdio||r&&r.end===!1||(m.on("end",a),m.on("close",o));var u=!1;return m.on("error",i),e.on("error",i),m.on("end",s),m.on("close",s),e.on("close",s),e.emit("pipe",m),e};
},{"events":40,"inherits":41,"readable-stream/duplex.js":43,"readable-stream/passthrough.js":52,"readable-stream/readable.js":53,"readable-stream/transform.js":54,"readable-stream/writable.js":55}],57:[function(require,module,exports){
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],58:[function(require,module,exports){
(function (process,global){
function inspect(e,r){var t={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),isBoolean(r)?t.showHidden=r:r&&exports._extend(t,r),isUndefined(t.showHidden)&&(t.showHidden=!1),isUndefined(t.depth)&&(t.depth=2),isUndefined(t.colors)&&(t.colors=!1),isUndefined(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=stylizeWithColor),formatValue(t,e,t.depth)}function stylizeWithColor(e,r){var t=inspect.styles[r];return t?"["+inspect.colors[t][0]+"m"+e+"["+inspect.colors[t][1]+"m":e}function stylizeNoColor(e){return e}function arrayToHash(e){var r={};return e.forEach(function(e){r[e]=!0}),r}function formatValue(e,r,t){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(t,e);return isString(n)||(n=formatValue(e,n,t)),n}var i=formatPrimitive(e,r);if(i)return i;var o=Object.keys(r),s=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),isError(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(r);if(0===o.length){if(isFunction(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var a="",c=!1,l=["{","}"];if(isArray(r)&&(c=!0,l=["[","]"]),isFunction(r)){var p=r.name?": "+r.name:"";a=" [Function"+p+"]"}if(isRegExp(r)&&(a=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(a=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(a=" "+formatError(r)),0===o.length&&(!c||0==r.length))return l[0]+a+l[1];if(0>t)return isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var f;return f=c?formatArray(e,r,t,s,o):o.map(function(n){return formatProperty(e,r,t,s,n,c)}),e.seen.pop(),reduceToSingleString(f,a,l)}function formatPrimitive(e,r){if(isUndefined(r))return e.stylize("undefined","undefined");if(isString(r)){var t="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(t,"string")}return isNumber(r)?e.stylize(""+r,"number"):isBoolean(r)?e.stylize(""+r,"boolean"):isNull(r)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,r,t,n,i){for(var o=[],s=0,u=r.length;u>s;++s)o.push(hasOwnProperty(r,String(s))?formatProperty(e,r,t,n,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,r,t,n,i,!0))}),o}function formatProperty(e,r,t,n,i,o){var s,u,a;if(a=Object.getOwnPropertyDescriptor(r,i)||{value:r[i]},a.get?u=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(a.value)<0?(u=isNull(t)?formatValue(e,a.value,null):formatValue(e,a.value,t-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),isUndefined(s)){if(o&&i.match(/^\d+$/))return u;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function reduceToSingleString(e,r,t){var n=0,i=e.reduce(function(e,r){return n++,r.indexOf("\n")>=0&&n++,e+r.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(""===r?"":r+"\n ")+" "+e.join(",\n  ")+" "+t[1]:t[0]+r+" "+e.join(", ")+" "+t[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return 10>e?"0"+e.toString(10):e.toString(10)}function timestamp(){var e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],r].join(" ")}function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var formatRegExp=/%[sdj%]/g;exports.format=function(e){if(!isString(e)){for(var r=[],t=0;t<arguments.length;t++)r.push(inspect(arguments[t]));return r.join(" ")}for(var t=1,n=arguments,i=n.length,o=String(e).replace(formatRegExp,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(r){return"[Circular]"}default:return e}}),s=n[t];i>t;s=n[++t])o+=isNull(s)||!isObject(s)?" "+s:" "+inspect(s);return o},exports.deprecate=function(e,r){function t(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(e,r).apply(this,arguments)};if(process.noDeprecation===!0)return e;var n=!1;return t};var debugs={},debugEnviron;exports.debuglog=function(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var r=process.pid;debugs[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else debugs[e]=function(){};return debugs[e]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,r){if(!r||!isObject(r))return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e};
}).call(this,require("FWaASH"),typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./support/isBuffer":57,"FWaASH":42,"inherits":41}],59:[function(require,module,exports){
module.exports=!0;
},{}],60:[function(require,module,exports){
(function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o=[].slice;t=require("events").EventEmitter,e=function(t){function e(t,r){return null==r&&(r="*"),this.handleMessage=n(this.handleMessage,this),this instanceof e?(e.__super__.constructor.call(this),this.target=t,this.origin=r,void this.listen()):new e(t,r)}return a(e,t),e.prototype.target=null,e.prototype.origin=null,e.prototype.post=function(){var t,e,n;return t=arguments[0],n=2<=arguments.length?o.call(arguments,1):[],e=this.pack(t,n),this.target.postMessage(e,this.origin)},e.prototype.listen=function(){return window.addEventListener?window.addEventListener("message",this.handleMessage):window.attachEvent("onmessage",this.handleMessage)},e.prototype.handleMessage=function(t){var e;return(e=this.unpack(t.data))?this.emit.apply(this,[e.channel].concat(o.call(e["package"]))):void 0},e.prototype.unpack=function(t){var e,n;try{return n=JSON.parse(t),{channel:n._postie.channel,"package":n._postie["package"]}}catch(r){return e=r,!1}},e.prototype.pack=function(t,e){return JSON.stringify({_postie:{channel:t,"package":e}})},e}(t),module.exports=e}).call(this);
},{"events":40}],61:[function(require,module,exports){
function ws(e,o){var t;return t=o?new WebSocket(e,o):new WebSocket(e)}var global=function(){return this}(),WebSocket=global.WebSocket||global.MozWebSocket;module.exports=WebSocket?ws:null,WebSocket&&(ws.prototype=WebSocket.prototype);
},{}],62:[function(require,module,exports){
function extend(){for(var r={},e=0;e<arguments.length;e++){var n=arguments[e];for(var t in n)n.hasOwnProperty(t)&&(r[t]=n[t])}return r}module.exports=extend;
},{}],63:[function(require,module,exports){
var vError=require("../lib/verror"),idlHelper={};idlHelper.generateIdlWireDescription=function(r){var e={},t=r.metadata;for(var n in t)if(t.hasOwnProperty(n)){for(var a=t[n],o=a.params,i=[],s=0;s<o.length;s++){var u=o[s];"$"!==u[0]&&i.push(u)}e[n]={InArgs:i,NumOutArgs:a.numOutArgs+1,IsStreaming:void 0!==a.injections.$stream}}return e};var getParamNames=function(r){var e=r.toString().replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,""),t=e.slice(e.indexOf("(")+1,e.indexOf(")")).match(/([^\s,]+)/g);return null===t&&(t=[]),t};idlHelper.ServiceWrapper=function(r,e){this.object=r,this.metadata={},e=e||{};for(var t in r)if(r.hasOwnProperty(t)&&t.length>0&&"_"!==t[0]){if(t[0]>="A"&&t[0]<="Z"){var n=t.charAt(0).toLowerCase()+t.slice(1);throw new Error("Method names must be camel case. Perhaps rename '"+t+"' to '"+n+"'")}var a=r[t];if("function"==typeof a){for(var o=getParamNames(a),i={},s=0;s<o.length;s++){var u=o[s];"$"===u[0]&&(i[u]=s)}var m={params:o,injections:i,numOutArgs:1};if(e[t]){var g=e[t];void 0!==g.numOutArgs&&(m.numOutArgs=g.numOutArgs)}this.metadata[t]=m}}},idlHelper.ServiceWrapper.prototype.validate=function(r){for(var e in r)if(r.hasOwnProperty(e)){var t=this.metadata[e];if(!t)return new vError.BadArgError("Missing method: "+e);var n=r[e],a=t.params.length-Object.keys(t.injections).length;if(a!==n.numInArgs)return new vError.BadArgError("Wrong number of input args for "+e+", got: "+a+", expected: "+n.numInArgs);if(t.numOutArgs!==n.numOutArgs)return new vError.BadArgError("Wrong number of output args for "+e+", got: "+t.numOutArgs+", expected "+n.numOutArgs);var o=t.injections.hasOwnProperty("$stream"),i=n.inputStreaming||n.outputStreaming;if(i&&!o)return new vError.BadArgError("Expected "+e+" to be streaming");if(!i&&o)return new vError.BadArgError("Expected "+e+" to not be streaming")}for(e in this.metadata)if(this.metadata.hasOwnProperty(e)&&!r.hasOwnProperty(e))return new vError.BadArgError("Unexpected method "+e+" implemented.");return null},module.exports=idlHelper;
<<<<<<< HEAD
},{"../lib/verror":41}],37:[function(require,module,exports){
function Client(e){return this instanceof Client?void(this._proxyConnection=e):new Client(e)}var Promise=require("es6-promise").Promise,Deferred=require("../lib/deferred"),vLog=require("../lib/vlog"),ErrorConversion=require("../proxy/error_conversion"),Stream=require("../proxy/stream"),vError=require("../lib/verror"),MessageType=require("../proxy/message_type"),IncomingPayloadType=require("../proxy/incoming_payload_type"),OutstandingRPC=function(e,r){this._proxy=e.proxy,this._id=-1,this._name=e.name,this._methodName=e.methodName,this._args=e.args,this._numOutParams=e.numOutParams,this._isStreaming=e.isStreaming||!1,this._cb=r,this._def=null};OutstandingRPC.prototype.start=function(){this._id=this._proxy.nextId();var e=new Deferred(this._cb),r=null;this._isStreaming&&(r=new Deferred,e.stream=new Stream(this._id,r.promise,!0),e.promise.stream=e.stream);var t=this.constructMessage();return this._def=e,this._proxy.sendRequest(t,MessageType.REQUEST,this,this._id),r&&this._proxy.senderPromise.then(function(e){r.resolve(e)},function(e){r.reject(e)}),e.promise},OutstandingRPC.prototype.handleResponse=function(e,r){switch(e){case IncomingPayloadType.FINAL_RESPONSE:this.handleCompletion(r);break;case IncomingPayloadType.STREAM_RESPONSE:this.handleStreamData(r);break;case IncomingPayloadType.ERROR_RESPONSE:this.handleError(r);break;case IncomingPayloadType.STREAM_CLOSE:this.handleStreamClose();break;default:this.handleError(new vError.InternalError("Recieved unknown response type from wspr"))}},OutstandingRPC.prototype.handleCompletion=function(e){1===e.length&&(e=e[0]),this._def.resolve(e),this._def.stream&&this._def.stream._queueRead(null),this._proxy.dequeue(this._id)},OutstandingRPC.prototype.handleStreamData=function(e){this._def.stream?this._def.stream._queueRead(e):vLog.warn("Ignoring streaming message for non-streaming flow : "+this._id)},OutstandingRPC.prototype.handleStreamClose=function(){this._def.stream&&this._def.stream._queueRead(null)},OutstandingRPC.prototype.handleError=function(e){var r;r=e instanceof vError.VeyronError?e:ErrorConversion.toJSerror(e),this._def.stream&&(this._def.stream.emit("error",r),this._def.stream.queueRead(null)),this._def.reject(r),this._proxy.dequeue(this._id)},OutstandingRPC.prototype.constructMessage=function(){var e={name:this._name,method:this._methodName,inArgs:this._args||[],numOutArgs:this._numOutParams||1,isStreaming:this._isStreaming};return JSON.stringify(e)},Client.prototype.bindTo=function(e,r,t){var n=this;"function"==typeof r&&(t=r,r=void 0);var i,s=new Deferred(t);void 0!==r?i=Promise.resolve(r):(vLog.debug("Requesting service signature for:",e),i=n._proxyConnection.getServiceSignature(e));var o=s.promise;return i.then(function(r){vLog.debug("Received signature for:",e,r);var t={},i=function(i){var s=r[i],o=s.numOutArgs;t[i]=function(){var r=Array.prototype.slice.call(arguments,0),t=null;if(r.length===s.inArgs.length+1&&(t=r[r.length-1],r=r.slice(0,s.inArgs.length)),r.length!==s.inArgs.length)throw new Error('Invalid number of arguments to "'+i+'". Expected '+s.inArgs.length+" but there were "+r.length);var a=new OutstandingRPC({proxy:n._proxyConnection,name:e,methodName:i,args:r,numOutParams:o,isStreaming:s.isStreaming},t);return a.start()}};for(var o in r)r.hasOwnProperty(o)&&i(o);t.signature=function(){return Promise.resolve(r)},s.resolve(t)}).catch(s.reject),o},module.exports=Client;
<<<<<<< HEAD
},{"../lib/deferred":39,"../lib/verror":40,"../lib/vlog":41,"../proxy/error_conversion":45,"../proxy/incoming_payload_type":46,"../proxy/message_type":47,"../proxy/stream":50,"es6-promise":23}],37:[function(require,module,exports){
function Server(e){return this instanceof Server?(this._router=e,this._handle=0,this.id=nextServerID++,this.dispatcher=null,void(this.serviceObjectHandles={})):new Server(e)}var Deferred=require("./../lib/deferred"),Promise=require("es6-promise").Promise,IdlHelper=require("./../idl/idl"),ServiceWrapper=IdlHelper.ServiceWrapper,nextServerID=1;Server.prototype.serve=function(e,r,t){return this.dispatcher=r,this._router.serve(e,this,t)},Server.prototype.stop=function(e){return this._router.stopServer(this,e)},Server.prototype.getServiceForHandle=function(e){var r=this.serviceObjectHandles[e];return r&&!r._cacheObject&&delete this.serviceObjectHandles[e],r},Server.prototype._handleLookupResult=function(e){return e instanceof ServiceWrapper?void 0!==e._handle&&this.serviceObjectHandles.hasOwnProperty(e._handle)?null:(e._handle=this._handle,this.serviceObjectHandles[e._handle]=e,this._handle++,null):new Error("The result of lookup should be of type ServiceWrapper")},Server.prototype._handleLookup=function(e,r){function t(e,r){if(i=!0,e)return void o.reject(e);var t=n._handleLookupResult(r);t?o.reject(t):o.resolve(r)}var i=!1,n=this,o=new Deferred,s=this.dispatcher(e,r,t);if(void 0===s)return o.promise;if(s instanceof Error)return o.reject(s),o.promise;var l=Promise.resolve(s);return l.then(function(e){var r=new Deferred,t=n._handleLookupResult(e);return t?r.reject(t):r.resolve(e),r.promise})},module.exports=Server;
},{"./../idl/idl":35,"./../lib/deferred":39,"es6-promise":23}],38:[function(require,module,exports){
var Promise=require("es6-promise").Promise,Stream=require("../proxy/stream"),MessageType=require("../proxy/message_type"),IncomingPayloadType=require("../proxy/incoming_payload_type"),ErrorConversion=require("../proxy/error_conversion"),Deferred=require("./../lib/deferred"),vLog=require("./../lib/vlog"),SimpleHandler=require("../proxy/simple_handler"),PublicId=require("../security/public"),vError=require("../lib/verror"),IdlHelper=require("./../idl/idl"),ServerStream=function(e){this._stream=e};ServerStream.prototype.handleResponse=function(e,r){switch(e){case IncomingPayloadType.STREAM_RESPONSE:this._stream._queueRead(r);break;case IncomingPayloadType.STREAM_CLOSE:this._stream._queueRead(null);break;case IncomingPayloadType.ERROR_RESPONSE:this._stream.emit("error",ErrorConversion.toJSerror(r))}};var Router=function(e){this._servers={},this._proxy=e,this._streamMap={},e.addIncomingHandler(IncomingPayloadType.INVOKE_REQUEST,this),e.addIncomingHandler(IncomingPayloadType.LOOKUP_REQUEST,this)},inject=function(e,r,t){var n=Object.keys(r),o={};n.forEach(function(e){o[r[e]]=e});var s=n.map(function(e){return r[e]});s.filter(function(e){return void 0!==e}),s.sort();var i=[];return s.forEach(function(r){var n=o[r];e.splice(r,0,t[n]),i.push(n)}),i};Router.prototype.invokeMethod=function(e,r,t){try{return r.apply(e,t)}catch(n){return n instanceof Error?n:new Error(n)}},Router.prototype.handleRequest=function(e,r,t){switch(r){case IncomingPayloadType.INVOKE_REQUEST:this.handleRPCRequest(e,t);break;case IncomingPayloadType.LOOKUP_REQUEST:this.handleLookupRequest(e,t);break;default:vLog.Error("Unknown request type "+t.type)}},Router.prototype.handleLookupRequest=function(e,r){var t=this._servers[r.serverID];if(!t){var n=JSON.stringify({err:new vError.ExistsError("unknown server")});return void this._proxy.sendRequest(n,MessageType.LOOKUP_RESPONSE,null,e)}var o=this;t._handleLookup(r.suffix,r.method).then(function(r){var t={signature:IdlHelper.generateIdlWireDescription(r),hasAuthorizer:!1,handle:r._handle,label:3};o._proxy.sendRequest(JSON.stringify(t),MessageType.LOOKUP_RESPONSE,null,e)}).catch(function(r){var t=JSON.stringify({err:ErrorConversion.toStandardErrorStruct(r)});o._proxy.sendRequest(t,MessageType.LOOKUP_RESPONSE,null,e)})},Router.prototype.handleRPCRequest=function(e,r){var t,n=this._servers[r.serverId];if(!n)return t=new Error("Request for unknown server "+r.serverId),void this.sendResult(e,r.method,null,t);var o=n.getServiceForHandle(r.handle);if(!o)return t=new Error("No service found"),void this.sendResult(e,r.method,null,t);var s=o.object,i=s[r.method];if(void 0===i)return t=new Error("Requested method "+r.method+" not found on"),void this.sendResult(e,r.method,null,t);var a=o.metadata[r.method],u=this,d=function(t,n){var o;t instanceof Error&&void 0!==t.stack&&(o=t.stack),vLog.debug("Requested method "+r.method+" threw an exception on invoke: ",t,o);var s,i=n.numOutArgs;switch(i){case 0:break;case 1:s=null;break;default:s=new Array(i)}u.sendResult(e,r.method,s,t,n)},l=r.args,c={suffix:r.context.suffix,name:r.context.name,remoteId:new PublicId(r.context.remoteID.names,r.context.remoteID.handle,this._proxy)},p=!1,h=function(t,n){p||(p=!0,c.remoteId.release(),u.sendResult(e,r.method,n,t,a))},m={$stream:new Stream(e,this._proxy.senderPromise,!1),$callback:h,$context:c,$suffix:c.suffix,$name:c.name,$remoteId:c.remoteId},v=inject(l,a.injections,m);if(-1!==v.indexOf("$stream")){var y=m.$stream;this._streamMap[e]=y;var f=new ServerStream(y);this._proxy.addIncomingStreamHandler(e,f)}var g=this.invokeMethod(s,i,l);if(g instanceof Error)return void d(g,a);var R=Promise.resolve(g);-1===v.indexOf("$callback")&&R.then(function(t){p||(c.remoteId.release(),p=!0,u.sendResult(e,r.method,t,null,a))},function(e){p||(p=!0,d(e,a))})},Router.prototype.sendResult=function(e,r,t,n,o){var s=[];if(o)switch(o.numOutArgs){case 0:void 0!==t&&vLog.error("Unexpected return value from "+r+": "+t),s=[];break;case 1:s=[t];break;default:Array.isArray(t)?(t.length!==o.numOutArgs&&vLog.error("Wrong number of arguments returned by "+r+". expected: "+o.numOutArgs+", got:"+t.length),s=t):(vLog.error("Wrong number of arguments returned by "+r+". expected: "+o.numOutArgs+", got: 1"),s=[t])}else s=[t];var i=null;void 0!==n&&null!==n&&(i=ErrorConversion.toStandardErrorStruct(n));var a=this._streamMap[e];if(a)a.serverClose(t,i),this._proxy.dequeue(e);else{var u={results:s,err:i},d=JSON.stringify(u);this._proxy.sendRequest(d,MessageType.RESPONSE,null,e)}},Router.prototype.serve=function(e,r,t){vLog.info("Serving under the name: ",e);var n={name:e,serverId:r.id};this._servers[r.id]=r;var o=new Deferred(t),s=JSON.stringify(n),i=this._proxy.id;this._proxy.id+=2;var a=new SimpleHandler(o,this._proxy,i);return this._proxy.sendRequest(s,MessageType.SERVE,a,i),o.promise},Router.prototype.stopServer=function(e,r){var t=this,n=new Deferred(r),o=this._proxy.id;this._proxy.id+=2;var s=new SimpleHandler(n,this._proxy,o);return this._proxy.sendRequest(e.id.toString(),MessageType.STOP,s,o),n.promise.then(function(r){return delete t._servers[e.id],r})},module.exports=Router;
},{"../lib/verror":40,"../proxy/error_conversion":45,"../proxy/incoming_payload_type":46,"../proxy/message_type":47,"../proxy/simple_handler":49,"../proxy/stream":50,"../security/public":54,"./../idl/idl":35,"./../lib/deferred":39,"./../lib/vlog":41,"es6-promise":23}],39:[function(require,module,exports){
=======
},{"../lib/deferred":40,"../lib/verror":41,"../lib/vlog":42,"../proxy/error_conversion":46,"../proxy/incoming_payload_type":47,"../proxy/message_type":48,"../proxy/stream":51,"es6-promise":24}],38:[function(require,module,exports){
function Server(e){return this instanceof Server?(this._router=e,this.id=nextServerID++,this.serviceObject=null,void(this._knownServiceDefinitions={})):new Server(e)}var Deferred=require("./../lib/deferred"),IdlHelper=require("./../idl/idl"),vError=require("./../lib/verror"),ServiceWrapper=IdlHelper.ServiceWrapper,nextServerID=1;Server.prototype.addIDL=function(e){var r=e.package;for(var t in e)t[0]===t[0].toUpperCase()&&e.hasOwnProperty(t)&&(this._knownServiceDefinitions[r+"."+t]=e[t])},Server.prototype._getAndValidateMetadata=function(e,r){var t=!1;if("string"==typeof r&&(r=[r]),Array.isArray(r)){t=!0;for(var i={},n=0;n<r.length;n++){var o=r[n],v=this._knownServiceDefinitions[o];if(!v)return new vError.NoExistError("unknown service "+o);for(var a in v)v.hasOwnProperty(a)&&(i[a]=v[a])}r=i}var s=new ServiceWrapper(e,r);if(t){var p=s.validate(r);if(p)return p}return this.serviceObject=s,null},Server.prototype.serve=function(e,r,t,i){i||"function"!=typeof t||(i=t,t=null);var n=this._getAndValidateMetadata(r,t);if(n){var o=new Deferred(i);return o.reject(n),o.promise}return this._router.serve(e,this,i)},Server.prototype.stop=function(e){return this._router.stopServer(this,e)},Server.prototype.generateIdlWireDescription=function(){return IdlHelper.generateIdlWireDescription(this.serviceObject)},module.exports=Server;
},{"./../idl/idl":36,"./../lib/deferred":40,"./../lib/verror":41}],39:[function(require,module,exports){
var Promise=require("es6-promise").Promise,Stream=require("../proxy/stream"),MessageType=require("../proxy/message_type"),IncomingPayloadType=require("../proxy/incoming_payload_type"),ErrorConversion=require("../proxy/error_conversion"),Deferred=require("./../lib/deferred"),vLog=require("./../lib/vlog"),SimpleHandler=require("../proxy/simple_handler"),PublicId=require("../security/public"),ServerStream=function(e){this._stream=e};ServerStream.prototype.handleResponse=function(e,r){switch(e){case IncomingPayloadType.STREAM_RESPONSE:this._stream._queueRead(r);break;case IncomingPayloadType.STREAM_CLOSE:this._stream._queueRead(null);break;case IncomingPayloadType.ERROR_RESPONSE:this._stream.emit("error",ErrorConversion.toJSerror(r))}};var Router=function(e){this._servers={},this._proxy=e,this._streamMap={},e.addIncomingHandler(IncomingPayloadType.INVOKE_REQUEST,this)},inject=function(e,r,t){var o=Object.keys(r),n={};o.forEach(function(e){n[r[e]]=e});var s=o.map(function(e){return r[e]});s.filter(function(e){return void 0!==e}),s.sort();var i=[];return s.forEach(function(r){var o=n[r];e.splice(r,0,t[o]),i.push(o)}),i};Router.prototype.invokeMethod=function(e,r,t){try{return r.apply(e,t)}catch(o){return o instanceof Error?o:new Error(o)}},Router.prototype.handleRequest=function(e,r){var t,o=this._servers[r.serverId];if(!o)return t=new Error("Request for unknown server "+r.serverId),void this.sendResult(e,r.method,null,t);var n=o.serviceObject;if(!n)return t=new Error("No service found"),void this.sendResulttResult(e,r.method,null,t);var s=n.object,i=s[r.method];if(void 0===i)return t=new Error("Requested method "+r.method+" not found on"),void this.sendResult(e,r.method,null,t);var a=n.metadata[r.method],u=this,d=function(t,o){var n;t instanceof Error&&void 0!==t.stack&&(n=t.stack),vLog.debug("Requested method "+r.method+" threw an exception on invoke: ",t,n);var s,i=o.numOutArgs;switch(i){case 0:break;case 1:s=null;break;default:s=new Array(i)}u.sendResult(e,r.method,s,t,o)},m=r.args,c={suffix:r.context.suffix,name:r.context.name,remoteId:new PublicId(r.context.remoteID.names,r.context.remoteID.handle,this._proxy)},l=!1,v=function(t,o){l||(l=!0,c.remoteId.release(),u.sendResult(e,r.method,o,t,a))},p={$stream:new Stream(e,this._proxy.senderPromise,!1),$callback:v,$context:c,$suffix:c.suffix,$name:c.name,$remoteId:c.remoteId},h=inject(m,a.injections,p);if(-1!==h.indexOf("$stream")){var f=p.$stream;this._streamMap[e]=f;var y=new ServerStream(f);this._proxy.addIncomingStreamHandler(e,y)}var g=this.invokeMethod(s,i,m);if(g instanceof Error)return void d(g,a);var _=Promise.resolve(g);-1===h.indexOf("$callback")&&_.then(function(t){l||(c.remoteId.release(),l=!0,u.sendResult(e,r.method,t,null,a))},function(e){l||(l=!0,d(e,a))})},Router.prototype.sendResult=function(e,r,t,o,n){var s=[];if(n)switch(n.numOutArgs){case 0:void 0!==t&&vLog.error("Unexpected return value from "+r+": "+t),s=[];break;case 1:s=[t];break;default:Array.isArray(t)?(t.length!==n.numOutArgs&&vLog.error("Wrong number of arguments returned by "+r+". expected: "+n.numOutArgs+", got:"+t.length),s=t):(vLog.error("Wrong number of arguments returned by "+r+". expected: "+n.numOutArgs+", got: 1"),s=[t])}else s=[t];var i=null;void 0!==o&&null!==o&&(i=ErrorConversion.toStandardErrorStruct(o));var a=this._streamMap[e];if(a)a.serverClose(t,i),this._proxy.dequeue(e);else{var u={results:s,err:i},d=JSON.stringify(u);this._proxy.sendRequest(d,MessageType.RESPONSE,null,e)}},Router.prototype.serve=function(e,r,t){vLog.info("Serving under the name: ",e);var o={name:e,serverId:r.id,service:r.generateIdlWireDescription()};this._servers[r.id]=r;var n=new Deferred(t),s=JSON.stringify(o),i=this._proxy.id;this._proxy.id+=2;var a=new SimpleHandler(n,this._proxy,i);return this._proxy.sendRequest(s,MessageType.SERVE,a,i),n.promise},Router.prototype.stopServer=function(e,r){var t=this,o=new Deferred(r),n=this._proxy.id;this._proxy.id+=2;var s=new SimpleHandler(o,this._proxy,n);return this._proxy.sendRequest(e.id.toString(),MessageType.STOP,s,n),o.promise.then(function(r){return delete t._servers[e.id],r})},module.exports=Router;
},{"../proxy/error_conversion":46,"../proxy/incoming_payload_type":47,"../proxy/message_type":48,"../proxy/simple_handler":50,"../proxy/stream":51,"../security/public":55,"./../lib/deferred":40,"./../lib/vlog":42,"es6-promise":24}],40:[function(require,module,exports){
>>>>>>> 76f848cf55f5f28f606eff824e5bae729627b8cc
(function (process){
var Promise=require("es6-promise").Promise,Deferred=function(e){var r=this;this.promise=new Promise(function(e,i){r.resolve=e,r.reject=i}),e&&this.promise.then(function(r){e(null,r)},function(r){e(r)}).catch(function(e){process.nextTick(function(){throw e})})};module.exports=Deferred;
}).call(this,require("FWaASH"))
},{"FWaASH":7,"es6-promise":24}],41:[function(require,module,exports){
=======
},{"../lib/verror":69}],64:[function(require,module,exports){
function Client(e){return this instanceof Client?void(this._proxyConnection=e):new Client(e)}var Promise=require("../lib/promise"),Deferred=require("../lib/deferred"),vLog=require("../lib/vlog"),ErrorConversion=require("../proxy/error_conversion"),Stream=require("../proxy/stream"),vError=require("../lib/verror"),MessageType=require("../proxy/message_type"),IncomingPayloadType=require("../proxy/incoming_payload_type"),OutstandingRPC=function(e,r){this._proxy=e.proxy,this._id=-1,this._name=e.name,this._methodName=e.methodName,this._args=e.args,this._numOutParams=e.numOutParams,this._isStreaming=e.isStreaming||!1,this._cb=r,this._def=null};OutstandingRPC.prototype.start=function(){this._id=this._proxy.nextId();var e=new Deferred(this._cb),r=null;this._isStreaming&&(r=new Deferred,e.stream=new Stream(this._id,r.promise,!0),e.promise.stream=e.stream);var t=this.constructMessage();return this._def=e,this._proxy.sendRequest(t,MessageType.REQUEST,this,this._id),r&&this._proxy.senderPromise.then(function(e){r.resolve(e)},function(e){r.reject(e)}),e.promise},OutstandingRPC.prototype.handleResponse=function(e,r){switch(e){case IncomingPayloadType.FINAL_RESPONSE:this.handleCompletion(r);break;case IncomingPayloadType.STREAM_RESPONSE:this.handleStreamData(r);break;case IncomingPayloadType.ERROR_RESPONSE:this.handleError(r);break;case IncomingPayloadType.STREAM_CLOSE:this.handleStreamClose();break;default:this.handleError(new vError.InternalError("Recieved unknown response type from wspr"))}},OutstandingRPC.prototype.handleCompletion=function(e){1===e.length&&(e=e[0]),this._def.resolve(e),this._def.stream&&this._def.stream._queueRead(null),this._proxy.dequeue(this._id)},OutstandingRPC.prototype.handleStreamData=function(e){this._def.stream?this._def.stream._queueRead(e):vLog.warn("Ignoring streaming message for non-streaming flow : "+this._id)},OutstandingRPC.prototype.handleStreamClose=function(){this._def.stream&&this._def.stream._queueRead(null)},OutstandingRPC.prototype.handleError=function(e){var r;r=e instanceof vError.VeyronError?e:ErrorConversion.toJSerror(e),this._def.stream&&(this._def.stream.emit("error",r),this._def.stream.queueRead(null)),this._def.reject(r),this._proxy.dequeue(this._id)},OutstandingRPC.prototype.constructMessage=function(){var e={name:this._name,method:this._methodName,inArgs:this._args||[],numOutArgs:this._numOutParams||1,isStreaming:this._isStreaming};return JSON.stringify(e)},Client.prototype.bindTo=function(e,r,t){var n=this;"function"==typeof r&&(t=r,r=void 0);var i,s=new Deferred(t);void 0!==r?i=Promise.resolve(r):(vLog.debug("Requesting service signature for:",e),i=n._proxyConnection.getServiceSignature(e));var o=s.promise;return i.then(function(r){vLog.debug("Received signature for:",e,r);var t={},i=function(i){var s=r[i],o=s.numOutArgs;t[i]=function(){var r=Array.prototype.slice.call(arguments,0),t=null;if(r.length===s.inArgs.length+1&&(t=r[r.length-1],r=r.slice(0,s.inArgs.length)),r.length!==s.inArgs.length)throw new Error('Invalid number of arguments to "'+i+'". Expected '+s.inArgs.length+" but there were "+r.length);var a=new OutstandingRPC({proxy:n._proxyConnection,name:e,methodName:i,args:r,numOutParams:o,isStreaming:s.isStreaming},t);return a.start()}};for(var o in r)r.hasOwnProperty(o)&&i(o);t.signature=function(){return Promise.resolve(r)},s.resolve(t)}).catch(s.reject),o},module.exports=Client;
},{"../lib/deferred":67,"../lib/promise":68,"../lib/verror":69,"../lib/vlog":70,"../proxy/error_conversion":74,"../proxy/incoming_payload_type":75,"../proxy/message_type":76,"../proxy/stream":79}],65:[function(require,module,exports){
function Server(e){return this instanceof Server?(this._router=e,this.id=nextServerID++,this.serviceObject=null,void(this._knownServiceDefinitions={})):new Server(e)}var Deferred=require("./../lib/deferred"),IdlHelper=require("./../idl/idl"),vError=require("./../lib/verror"),ServiceWrapper=IdlHelper.ServiceWrapper,nextServerID=1;Server.prototype.addIDL=function(e){var r=e.package;for(var t in e)t[0]===t[0].toUpperCase()&&e.hasOwnProperty(t)&&(this._knownServiceDefinitions[r+"."+t]=e[t])},Server.prototype._getAndValidateMetadata=function(e,r){var t=!1;if("string"==typeof r&&(r=[r]),Array.isArray(r)){t=!0;for(var i={},n=0;n<r.length;n++){var o=r[n],v=this._knownServiceDefinitions[o];if(!v)return new vError.NoExistError("unknown service "+o);for(var a in v)v.hasOwnProperty(a)&&(i[a]=v[a])}r=i}var s=new ServiceWrapper(e,r);if(t){var p=s.validate(r);if(p)return p}return this.serviceObject=s,null},Server.prototype.serve=function(e,r,t,i){i||"function"!=typeof t||(i=t,t=null);var n=this._getAndValidateMetadata(r,t);if(n){var o=new Deferred(i);return o.reject(n),o.promise}return this._router.serve(e,this,i)},Server.prototype.stop=function(e){return this._router.stopServer(this,e)},Server.prototype.generateIdlWireDescription=function(){return IdlHelper.generateIdlWireDescription(this.serviceObject)},module.exports=Server;
},{"./../idl/idl":63,"./../lib/deferred":67,"./../lib/verror":69}],66:[function(require,module,exports){
var Promise=require("../lib/promise"),Stream=require("../proxy/stream"),MessageType=require("../proxy/message_type"),IncomingPayloadType=require("../proxy/incoming_payload_type"),ErrorConversion=require("../proxy/error_conversion"),Deferred=require("./../lib/deferred"),vLog=require("./../lib/vlog"),SimpleHandler=require("../proxy/simple_handler"),PublicId=require("../security/public"),ServerStream=function(e){this._stream=e};ServerStream.prototype.handleResponse=function(e,r){switch(e){case IncomingPayloadType.STREAM_RESPONSE:this._stream._queueRead(r);break;case IncomingPayloadType.STREAM_CLOSE:this._stream._queueRead(null);break;case IncomingPayloadType.ERROR_RESPONSE:this._stream.emit("error",ErrorConversion.toJSerror(r))}};var Router=function(e){this._servers={},this._proxy=e,this._streamMap={},e.addIncomingHandler(IncomingPayloadType.INVOKE_REQUEST,this)},inject=function(e,r,t){var o=Object.keys(r),n={};o.forEach(function(e){n[r[e]]=e});var s=o.map(function(e){return r[e]});s.filter(function(e){return void 0!==e}),s.sort();var i=[];return s.forEach(function(r){var o=n[r];e.splice(r,0,t[o]),i.push(o)}),i};Router.prototype.invokeMethod=function(e,r,t){try{return r.apply(e,t)}catch(o){return o instanceof Error?o:new Error(o)}},Router.prototype.handleRequest=function(e,r){var t,o=this._servers[r.serverId];if(!o)return t=new Error("Request for unknown server "+r.serverId),void this.sendResult(e,r.method,null,t);var n=o.serviceObject;if(!n)return t=new Error("No service found"),void this.sendResulttResult(e,r.method,null,t);var s=n.object,i=s[r.method];if(void 0===i)return t=new Error("Requested method "+r.method+" not found on"),void this.sendResult(e,r.method,null,t);var a=n.metadata[r.method],u=this,d=function(t,o){var n;t instanceof Error&&void 0!==t.stack&&(n=t.stack),vLog.debug("Requested method "+r.method+" threw an exception on invoke: ",t,n);var s,i=o.numOutArgs;switch(i){case 0:break;case 1:s=null;break;default:s=new Array(i)}u.sendResult(e,r.method,s,t,o)},m=r.args,c={suffix:r.context.suffix,name:r.context.name,remoteId:new PublicId(r.context.remoteID.names,r.context.remoteID.handle,this._proxy)},l=!1,v=function(t,o){l||(l=!0,c.remoteId.release(),u.sendResult(e,r.method,o,t,a))},p={$stream:new Stream(e,this._proxy.senderPromise,!1),$cb:v,$context:c,$suffix:c.suffix,$name:c.name,$remoteId:c.remoteId},h=inject(m,a.injections,p);if(-1!==h.indexOf("$stream")){var f=p.$stream;this._streamMap[e]=f;var y=new ServerStream(f);this._proxy.addIncomingStreamHandler(e,y)}var g=this.invokeMethod(s,i,m);if(g instanceof Error)return void d(g,a);var _=Promise.resolve(g);-1===h.indexOf("$cb")&&_.then(function(t){l||(c.remoteId.release(),l=!0,u.sendResult(e,r.method,t,null,a))},function(e){l||(l=!0,d(e,a))})},Router.prototype.sendResult=function(e,r,t,o,n){var s=[];if(n)switch(n.numOutArgs){case 0:void 0!==t&&vLog.error("Unexpected return value from "+r+": "+t),s=[];break;case 1:s=[t];break;default:Array.isArray(t)?(t.length!==n.numOutArgs&&vLog.error("Wrong number of arguments returned by "+r+". expected: "+n.numOutArgs+", got:"+t.length),s=t):(vLog.error("Wrong number of arguments returned by "+r+". expected: "+n.numOutArgs+", got: 1"),s=[t])}else s=[t];var i=null;void 0!==o&&null!==o&&(i=ErrorConversion.toStandardErrorStruct(o));var a=this._streamMap[e];if(a)a.serverClose(t,i),this._proxy.dequeue(e);else{var u={results:s,err:i},d=JSON.stringify(u);this._proxy.sendRequest(d,MessageType.RESPONSE,null,e)}},Router.prototype.serve=function(e,r,t){vLog.info("Serving under the name: ",e);var o={name:e,serverId:r.id,service:r.generateIdlWireDescription()};this._servers[r.id]=r;var n=new Deferred(t),s=JSON.stringify(o),i=this._proxy.id;this._proxy.id+=2;var a=new SimpleHandler(n,this._proxy,i);return this._proxy.sendRequest(s,MessageType.SERVE,a,i),n.promise},Router.prototype.stopServer=function(e,r){var t=this,o=new Deferred(r),n=this._proxy.id;this._proxy.id+=2;var s=new SimpleHandler(o,this._proxy,n);return this._proxy.sendRequest(e.id.toString(),MessageType.STOP,s,n),o.promise.then(function(r){return delete t._servers[e.id],r})},module.exports=Router;
},{"../lib/promise":68,"../proxy/error_conversion":74,"../proxy/incoming_payload_type":75,"../proxy/message_type":76,"../proxy/simple_handler":78,"../proxy/stream":79,"../security/public":83,"./../lib/deferred":67,"./../lib/vlog":70}],67:[function(require,module,exports){
function Deferred(e){var r=this;r.promise=new Promise(function(e,o){r.resolve=e,r.reject=o}),e&&r.promise.done(function(r){e(null,r)},function(r){e(r)})}var Promise=require("./promise");module.exports=Deferred;
},{"./promise":68}],68:[function(require,module,exports){
module.exports=require("bluebird");
},{"bluebird":3}],69:[function(require,module,exports){
>>>>>>> 93356105144fbcd30c84c03b371da5873adf0efa
var inherits=require("util").inherits,vError={};vError.Ids={Aborted:"veyron.io/veyron/veyron2/verror.Aborted",BadArg:"veyron.io/veyron/veyron2/verror.BadArg",BadProtocol:"veyron.io/veyron/veyron2/verror.BadProtocol",Exists:"veyron.io/veyron/veyron2/verror.Exists",Internal:"veyron.io/veyron/veyron2/verror.Internal",NoAccess:"veyron.io/veyron/veyron2/verror.NoAccess",NoExist:"veyron.io/veyron/veyron2/verror.NoExist",NoExistOrNoAccess:"veyron.io/veyron/veyron2/verror.NoExistOrNoAccess"},vError.VeyronError=function(r,o){return this instanceof vError.VeyronError?(Error.call(this),this.message=r,o&&(this.name=o),void("function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,vError.VeyronError):this.stack=(new Error).stack)):new vError.VeyronError(r,o)},inherits(vError.VeyronError,Error),vError.equals=function(r,o){var E=r instanceof vError.VeyronError,e=o instanceof vError.VeyronError;return E&&e?r.message===o.message&&r.id===o.id:!1},vError.AbortedError=function(r){return this instanceof vError.AbortedError?void vError.VeyronError.call(this,r,vError.Ids.Aborted):new vError.AbortedError(r)},inherits(vError.AbortedError,vError.VeyronError),vError.BadArgError=function(r){return this instanceof vError.BadArgError?void vError.VeyronError.call(this,r,vError.Ids.BadArg):new vError.BadArgError(r)},inherits(vError.BadArgError,vError.VeyronError),vError.BadProtocolError=function(r){return this instanceof vError.BadProtocolError?void vError.VeyronError.call(this,r,vError.Ids.BadProtocol):new vError.BadProtocolError(r)},inherits(vError.BadProtocolError,vError.VeyronError),vError.ExistsError=function(r){return this instanceof vError.ExistsError?void vError.VeyronError.call(this,r,vError.Ids.Exists):new vError.ExistsError(r)},inherits(vError.ExistsError,vError.VeyronError),vError.InternalError=function(r){return this instanceof vError.InternalError?void vError.VeyronError.call(this,r,vError.Ids.Internal):new vError.InternalError(r)},inherits(vError.InternalError,vError.VeyronError),vError.NoAccessError=function(r){return this instanceof vError.NoAccessError?void vError.VeyronError.call(this,r,vError.Ids.NoAccess):new vError.NoAccessError(r)},inherits(vError.NoAccessError,vError.VeyronError),vError.NoExistError=function(r){return this instanceof vError.NoExistError?void vError.VeyronError.call(this,r,vError.Ids.NoExist):new vError.NoExistError(r)},inherits(vError.NoExistError,vError.VeyronError),vError.NoExistOrNoAccessError=function(r){return this instanceof vError.NoExistOrNoAccessError?void vError.VeyronError.call(this,r,vError.Ids.NoExistOrNoAccess):new vError.NoExistOrNoAccessError(r)},inherits(vError.NoExistOrNoAccessError,vError.VeyronError),module.exports=vError;
},{"util":58}],70:[function(require,module,exports){
var vlog=function(){this.level=this.levels.NOLOG};vlog.prototype.levels={NOLOG:0,ERROR:1,WARN:2,DEBUG:3,INFO:4},vlog.prototype.error=function(){this._log(this.levels.ERROR,arguments)},vlog.prototype.warn=function(){this._log(this.levels.WARN,arguments)},vlog.prototype.debug=function(){this._log(this.levels.DEBUG,arguments)},vlog.prototype.info=function(){this._log(this.levels.INFO,arguments)},vlog.prototype._log=function(e,o){this.level>=e&&this._write(e,o)},vlog.prototype._write=function(e,o){var t=this._getConsole();if(t){var l=t.log;switch(e){case this.levels.ERROR:l=t.error;break;case this.levels.WARN:l=t.warn;break;case this.levels.DEBUG:l=t.log;break;case this.levels.INFO:l=t.info}l.apply(t,o)}},vlog.prototype._getConsole=function(){return"undefined"!=typeof console?console:null};var vlogInstance=new vlog;module.exports=vlogInstance;
},{}],71:[function(require,module,exports){
var WS=require("ws");module.exports=WS;
},{"ws":61}],72:[function(require,module,exports){
function convertServersToStrings(e){for(var r=e[0],o=e[1],t=[],n=0;n<r.length;n++){var a=r[n].server;""!==o&&(a=nameUtil.join(a,o)),t.push(a)}return t}function makeAllTerminal(e){return e.map(nameUtil.convertToTerminalName)}function allAreTerminal(e){return e.every(nameUtil.isTerminal)}var nameUtil=require("./util.js"),Promise=require("../lib/promise"),Deferred=require("../lib/deferred"),vError=require("../lib/verror"),Namespace=function(e,r){this._client=e,this._roots=r};Namespace.errNotAMountTable=function(){return new vError.VeyronError("Resolution target is not a mount table",vError.Ids.Aborted)},Namespace.errNoSuchName=function(){return new vError.VeyronError("Name doesn't exist",vError.Ids.NoExist)},Namespace.errNoSuchNameRoot=function(){return new vError.VeyronError("Name doesn't exist: root of namespace",vError.NoExist)},Namespace._maxDepth=32,Namespace.prototype._rootNames=function(e){if(nameUtil.isRooted(e)&&"/"!==e)return[e];for(var r=[],o=0;o<this._roots.length;o++)r.push(nameUtil.join(this._roots[o],e));return r},Namespace.prototype._resolveAgainstMountTable=function(e){if(0===e.length)return Promise.reject(new vError.BadArgError("No servers to resolve query."));var r=this,o=nameUtil.convertToTerminalName(e[0]);return this._client.bindTo(o).then(function(e){if(void 0===e.resolveStep)throw Namespace.errNotAMountTable();return e.resolveStep().then(convertServersToStrings)}).catch(function(o){if(vError.equals(o,Namespace.errNoSuchName())||vError.equals(o,Namespace.errNoSuchNameRoot())||e.length<=1)throw o;return r._resolveAgainstMountTable(e.slice(1))})},Namespace.prototype._resolveLoop=function(e,r,o,t){var n=this;return n._resolveAgainstMountTable(e).then(function(r){if(allAreTerminal(r))return r;if(o++,o>Namespace._maxDepth)throw new vError.InternalError("Maxiumum resolution depth exceeded.");return n._resolveLoop(r,e,o,t)},function(o){return t(o,e,r)})},Namespace.prototype.resolveToMountTable=function(e,r){var o=this._rootNames(e),t=new Deferred(r),n=function(e,r,o){if(vError.equals(e,Namespace.errNoSuchNameRoot())||vError.equals(e,Namespace.errNotAMountTable()))return makeAllTerminal(o);if(vError.equals(e,Namespace.errNoSuchName()))return makeAllTerminal(r);throw e};return t.resolve(this._resolveLoop(o,o,0,n)),t.promise},Namespace.prototype.resolveMaximally=function(e,r){var o=this._rootNames(e),t=new Deferred(r),n=function(e,r){if(vError.equals(e,Namespace.errNoSuchNameRoot())||vError.equals(e,Namespace.errNoSuchName())||vError.equals(e,Namespace.errNotAMountTable()))return makeAllTerminal(r);throw e};return t.resolve(this._resolveLoop(o,o,0,n)),t.promise},module.exports=Namespace;
},{"../lib/deferred":67,"../lib/promise":68,"../lib/verror":69,"./util.js":73}],73:[function(require,module,exports){
var _numInitialSlashes=function(e){for(var n=0;n<e.length;n++)if("/"!==e.charAt(n))return n;return e.length},_numTailSlashes=function(e){for(var n=e.length-1;n>=0;n--)if("/"!==e.charAt(n))return e.length-1-n;return e.length},_removeInitialSlashes=function(e){return e.replace(/^\/*/g,"")},_removeTailSlashes=function(e){return e.replace(/\/*$/g,"")},_joinNamePartsOnArray=function(e){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++){var t=e[r],i=_numTailSlashes(n),a=_numInitialSlashes(t);0!==i||0!==a?a>i?(n=_removeTailSlashes(n),n+=t):n+=_removeInitialSlashes(t):n+="/"+t}return n},join=function(e){return _joinNamePartsOnArray(Array.isArray(e)?e:Array.prototype.slice.call(arguments))},isRooted=function(e){return 1===_numInitialSlashes(e)},isTerminal=function(e){var n=_numInitialSlashes(e);if(n>=2)return!0;if(1===n){var r=e.substr(1).indexOf("/"),t=e.substr(1).indexOf("//");return r===t}return 0===e.length},convertToTerminalName=function(e){return""===e||"/"===e?"":isRooted(e)?-1===e.substr(1).indexOf("/")?e:e.substr(1).indexOf("/")===e.length-2?e.substring(0,e.length-1):e.replace(/^(\/[^/]+?)[/]*\//,"$1//"):"//"+_removeInitialSlashes(e)};module.exports={join:join,isTerminal:isTerminal,isRooted:isRooted,convertToTerminalName:convertToTerminalName};
<<<<<<< HEAD
},{}],46:[function(require,module,exports){
<<<<<<< HEAD
var vError=require("./../lib/verror"),ec={},_standard=function(r,o){this.iD=r,this.msg=o};ec.toStandardErrorStruct=function(r){var o="",t="";return r instanceof Error?(t=r.message,"Error"!==r.name&&(o=r.name)):void 0!==r&&null!==r&&(t=r+""),new _standard(o,t)};var errIdConstrMap={};errIdConstrMap[vError.Ids.Aborted]=vError.AbortedError,errIdConstrMap[vError.Ids.BadArg]=vError.BadArgError,errIdConstrMap[vError.Ids.BadProtocol]=vError.BadProtocolError,errIdConstrMap[vError.Ids.Exists]=vError.ExistsError,errIdConstrMap[vError.Ids.Internal]=vError.InternalError,errIdConstrMap[vError.Ids.NotAuthorized]=vError.NotAuthorizedError,errIdConstrMap[vError.Ids.NotFound]=vError.NotFoundError,ec.toJSerror=function(r){var o,t=errIdConstrMap[r.iD];return o=t?new t(r.msg):new vError.VeyronError(r.msg,r.iD),o.stack="",o},module.exports=ec;
<<<<<<< HEAD
},{"./../lib/verror":40}],46:[function(require,module,exports){
var IncomingPayloadType={FINAL_RESPONSE:0,STREAM_RESPONSE:1,ERROR_RESPONSE:2,INVOKE_REQUEST:3,STREAM_CLOSE:4,LOOKUP_REQUEST:5};module.exports=IncomingPayloadType;
},{}],47:[function(require,module,exports){
var MessageType={REQUEST:0,SERVE:1,RESPONSE:2,STREAM_VALUE:3,STREAM_CLOSE:4,SIGNATURE:5,STOP:6,BLESS:8,UNLINK_ID:9,NEW_ID:10,LOOKUP_RESPONSE:11};module.exports=MessageType;
},{}],48:[function(require,module,exports){
function Proxy(e){this.id=1,this.outstandingRequests={},this.bindCache={},this._hasResolvedConfig=!1,this._configDeferred=new Deferred,this.config=this._configDeferred.promise,this.senderPromise=e,this.incomingRequestHandlers={}}var MessageType=require("./message_type"),IncomingPayloadType=require("./incoming_payload_type"),Deferred=require("./../lib/deferred"),Promise=require("es6-promise").Promise,vLog=require("./../lib/vlog"),SimpleHandler=require("./simple_handler"),BIND_CACHE_TTL=36e5;Proxy.prototype.process=function(e){if(this._hasResolvedConfig===!1)return this._hasResolvedConfig=!0,void this._configDeferred.resolve(e);var t,i=e.id%2===0,n=this.outstandingRequests[e.id];try{t=JSON.parse(e.data)}catch(s){return void(i||n.handleResponse(IncomingPayloadType.ERROR_RESPONSE,e.data))}if(!i&&!n)return void vLog.warn("Dropping message for unknown flow "+e.id+" "+e.data);if(n)n.handleResponse(t.type,t.message);else{if(n=this.incomingRequestHandlers[t.type],!n)return void vLog.warn("Dropping message for unknown invoke payload "+t.type);n.handleRequest(e.id,t.type,t.message)}},Proxy.prototype.dequeue=function(e,t){delete this.outstandingRequests[t]},Proxy.prototype.nextId=function(){var e=this.id;return this.id+=2,e},Proxy.prototype.getServiceSignature=function(e){var t=this.bindCache[e],i=new Date;if(t&&i-t.fetched<BIND_CACHE_TTL)return Promise.resolve(t.signature);var n=new Deferred,s=this;n.promise.then(function(t){s.bindCache[e]={signature:t,fetched:i}});var r={name:e},o=JSON.stringify(r),a=this.nextId(),d=new SimpleHandler(n,this,a);return this.sendRequest(o,MessageType.SIGNATURE,d,a),n.promise},Proxy.prototype.addIncomingHandler=function(e,t){this.incomingRequestHandlers[e]=t},Proxy.prototype.addIncomingStreamHandler=function(e,t){this.outstandingRequests[e]=t},Proxy.prototype.sendRequest=function(e,t,i,n){i&&(this.outstandingRequests[n]=i);var s=JSON.stringify({id:n,data:e,type:t}),r=this;this.senderPromise.then(function(e){e.send(s)}).catch(function(e){var t=r.outstandingRequests[n];t&&(t.handleResponse(IncomingPayloadType.ERROR_RESPONSE,e),delete r.outstandingRequests[n])})},module.exports=Proxy;
},{"./../lib/deferred":39,"./../lib/vlog":41,"./incoming_payload_type":46,"./message_type":47,"./simple_handler":49,"es6-promise":23}],49:[function(require,module,exports){
=======
=======
var vError=require("./../lib/verror"),ec={},_standard=function(r,o){this.iD=r,this.msg=o};ec.toStandardErrorStruct=function(r){var o="",s="";return r instanceof Error?(s=r.message,"Error"!==r.name&&(o=r.name)):void 0!==r&&null!==r&&(s=r+""),new _standard(o,s)};var errIdConstrMap={};errIdConstrMap[vError.Ids.Aborted]=vError.AbortedError,errIdConstrMap[vError.Ids.BadArg]=vError.BadArgError,errIdConstrMap[vError.Ids.BadProtocol]=vError.BadProtocolError,errIdConstrMap[vError.Ids.Exists]=vError.ExistsError,errIdConstrMap[vError.Ids.Internal]=vError.InternalError,errIdConstrMap[vError.Ids.NoAccess]=vError.NoAccessError,errIdConstrMap[vError.Ids.NoExist]=vError.NoExistError,errIdConstrMap[vError.Ids.NoExistOrNoAccess]=vError.NoExistOrNoAccessError,ec.toJSerror=function(r){var o,s=errIdConstrMap[r.iD];return o=s?new s(r.msg):new vError.VeyronError(r.msg,r.iD),o.stack="",o},module.exports=ec;
>>>>>>> 172f80c923badeecc9e407ce7644b884716a8eda
},{"./../lib/verror":41}],47:[function(require,module,exports){
=======
},{}],74:[function(require,module,exports){
var vError=require("./../lib/verror"),ec={},_standard=function(r,o){this.iD=r,this.msg=o};ec.toStandardErrorStruct=function(r){var o="",s="";return r instanceof Error?(s=r.message,"Error"!==r.name&&(o=r.name)):void 0!==r&&null!==r&&(s=r+""),new _standard(o,s)};var errIdConstrMap={};errIdConstrMap[vError.Ids.Aborted]=vError.AbortedError,errIdConstrMap[vError.Ids.BadArg]=vError.BadArgError,errIdConstrMap[vError.Ids.BadProtocol]=vError.BadProtocolError,errIdConstrMap[vError.Ids.Exists]=vError.ExistsError,errIdConstrMap[vError.Ids.Internal]=vError.InternalError,errIdConstrMap[vError.Ids.NoAccess]=vError.NoAccessError,errIdConstrMap[vError.Ids.NoExist]=vError.NoExistError,errIdConstrMap[vError.Ids.NoExistOrNoAccess]=vError.NoExistOrNoAccessError,ec.toJSerror=function(r){var o,s=errIdConstrMap[r.iD];return o=s?new s(r.msg):new vError.VeyronError(r.msg,r.iD),o.stack="",o},module.exports=ec;
},{"./../lib/verror":69}],75:[function(require,module,exports){
>>>>>>> 93356105144fbcd30c84c03b371da5873adf0efa
var IncomingPayloadType={FINAL_RESPONSE:0,STREAM_RESPONSE:1,ERROR_RESPONSE:2,INVOKE_REQUEST:3,STREAM_CLOSE:4};module.exports=IncomingPayloadType;
},{}],76:[function(require,module,exports){
var MessageType={REQUEST:0,SERVE:1,RESPONSE:2,STREAM_VALUE:3,STREAM_CLOSE:4,SIGNATURE:5,STOP:6,BLESS:8,UNLINK_ID:9,NEW_ID:10};module.exports=MessageType;
<<<<<<< HEAD
},{}],49:[function(require,module,exports){
function Proxy(e){this.id=1,this.outstandingRequests={},this.bindCache={},this._hasResolvedConfig=!1,this._configDeferred=new Deferred,this.config=this._configDeferred.promise,this.senderPromise=e,this.incomingRequestHandlers={}}var MessageType=require("./message_type"),IncomingPayloadType=require("./incoming_payload_type"),Deferred=require("./../lib/deferred"),Promise=require("es6-promise").Promise,vLog=require("./../lib/vlog"),SimpleHandler=require("./simple_handler"),BIND_CACHE_TTL=36e5;Proxy.prototype.process=function(e){if(this._hasResolvedConfig===!1)return this._hasResolvedConfig=!0,void this._configDeferred.resolve(e);var i,n=e.id%2===0,t=this.outstandingRequests[e.id];try{i=JSON.parse(e.data)}catch(s){return void(n||t.handleResponse(IncomingPayloadType.ERROR_RESPONSE,e.data))}if(!n&&!t)return void vLog.warn("Dropping message for unknown flow "+e.id+" "+e.data);if(t)t.handleResponse(i.type,i.message);else{if(t=this.incomingRequestHandlers[i.type],!t)return void vLog.warn("Dropping message for unknown invoke payload "+i.type);t.handleRequest(e.id,i.message)}},Proxy.prototype.dequeue=function(e,i){delete this.outstandingRequests[i]},Proxy.prototype.nextId=function(){var e=this.id;return this.id+=2,e},Proxy.prototype.getServiceSignature=function(e){var i=this.bindCache[e],n=new Date;if(i&&n-i.fetched<BIND_CACHE_TTL)return Promise.resolve(i.signature);var t=new Deferred,s=this;t.promise.then(function(i){s.bindCache[e]={signature:i,fetched:n}});var r={name:e},o=JSON.stringify(r),a=this.nextId(),d=new SimpleHandler(t,this,a);return this.sendRequest(o,MessageType.SIGNATURE,d,a),t.promise},Proxy.prototype.addIncomingHandler=function(e,i){this.incomingRequestHandlers[e]=i},Proxy.prototype.addIncomingStreamHandler=function(e,i){this.outstandingRequests[e]=i},Proxy.prototype.sendRequest=function(e,i,n,t){n&&(this.outstandingRequests[t]=n);var s=JSON.stringify({id:t,data:e,type:i}),r=this;this.senderPromise.then(function(e){e.send(s)}).catch(function(e){var i=r.outstandingRequests[t];i&&(i.handleResponse(IncomingPayloadType.ERROR_RESPONSE,e),delete r.outstandingRequests[t])})},module.exports=Proxy;
},{"./../lib/deferred":40,"./../lib/vlog":42,"./incoming_payload_type":47,"./message_type":48,"./simple_handler":50,"es6-promise":24}],50:[function(require,module,exports){
>>>>>>> 76f848cf55f5f28f606eff824e5bae729627b8cc
=======
},{}],77:[function(require,module,exports){
function Proxy(e){this.id=1,this.outstandingRequests={},this.bindCache={},this._hasResolvedConfig=!1,this._configDeferred=new Deferred,this.config=this._configDeferred.promise,this.senderPromise=e,this.incomingRequestHandlers={}}var MessageType=require("./message_type"),IncomingPayloadType=require("./incoming_payload_type"),Deferred=require("./../lib/deferred"),Promise=require("../lib/promise"),vLog=require("./../lib/vlog"),SimpleHandler=require("./simple_handler"),BIND_CACHE_TTL=36e5;Proxy.prototype.process=function(e){if(this._hasResolvedConfig===!1)return this._hasResolvedConfig=!0,void this._configDeferred.resolve(e);var i,n=e.id%2===0,t=this.outstandingRequests[e.id];try{i=JSON.parse(e.data)}catch(s){return void(n||t.handleResponse(IncomingPayloadType.ERROR_RESPONSE,e.data))}if(!n&&!t)return void vLog.warn("Dropping message for unknown flow "+e.id+" "+e.data);if(t)t.handleResponse(i.type,i.message);else{if(t=this.incomingRequestHandlers[i.type],!t)return void vLog.warn("Dropping message for unknown invoke payload "+i.type);t.handleRequest(e.id,i.message)}},Proxy.prototype.dequeue=function(e,i){delete this.outstandingRequests[i]},Proxy.prototype.nextId=function(){var e=this.id;return this.id+=2,e},Proxy.prototype.getServiceSignature=function(e){var i=this.bindCache[e],n=new Date;if(i&&n-i.fetched<BIND_CACHE_TTL)return Promise.resolve(i.signature);var t=new Deferred,s=this;t.promise.then(function(i){s.bindCache[e]={signature:i,fetched:n}});var r={name:e},o=JSON.stringify(r),a=this.nextId(),d=new SimpleHandler(t,this,a);return this.sendRequest(o,MessageType.SIGNATURE,d,a),t.promise},Proxy.prototype.addIncomingHandler=function(e,i){this.incomingRequestHandlers[e]=i},Proxy.prototype.addIncomingStreamHandler=function(e,i){this.outstandingRequests[e]=i},Proxy.prototype.sendRequest=function(e,i,n,t){n&&(this.outstandingRequests[t]=n);var s=JSON.stringify({id:t,data:e,type:i}),r=this;this.senderPromise.then(function(e){e.send(s)}).catch(function(e){var i=r.outstandingRequests[t];i&&(i.handleResponse(IncomingPayloadType.ERROR_RESPONSE,e),delete r.outstandingRequests[t])})},module.exports=Proxy;
},{"../lib/promise":68,"./../lib/deferred":67,"./../lib/vlog":70,"./incoming_payload_type":75,"./message_type":76,"./simple_handler":78}],78:[function(require,module,exports){
>>>>>>> 93356105144fbcd30c84c03b371da5873adf0efa
var IncomingPayloadType=require("./incoming_payload_type"),ErrorConversion=require("./error_conversion"),vError=require("./../lib/verror"),Handler=function(r,e,o){this._proxy=e,this._def=r,this._id=o};Handler.prototype.handleResponse=function(r,e){switch(r){case IncomingPayloadType.FINAL_RESPONSE:this._def.resolve(e);break;case IncomingPayloadType.ERROR_RESPONSE:var o=ErrorConversion.toJSerror(e);this._def.reject(o);break;default:this._def.reject(new vError.InternalError("unknown response type "+r))}this._proxy.dequeue(this._id)},module.exports=Handler;
},{"./../lib/verror":69,"./error_conversion":74,"./incoming_payload_type":75}],79:[function(require,module,exports){
var MessageType=require("./message_type"),Duplex=require("stream").Duplex,inherits=require("util").inherits,Stream=function(e,t,s){Duplex.call(this,{objectMode:!0}),this.flowId=e,this.isClient=s,this.webSocketPromise=t,this.onmessage=null,this.wsBuffer=[],this.shouldQueue=!1};inherits(Stream,Duplex),Stream.prototype.clientClose=function(){var e={id:this.flowId,type:MessageType.STREAM_CLOSE};Duplex.prototype.write.call(this,e)},Stream.prototype.serverClose=function(e,t){var s={id:this.flowId,type:MessageType.RESPONSE,data:JSON.stringify({results:[e||null],err:t||null})};Duplex.prototype.write.call(this,s)},Stream.prototype._read=function(){for(var e=0;e<this.wsBuffer.length&&this.push(this.wsBuffer[e]);)++e;e>0&&(this.wsBuffer=this.wsBuffer.splice(e)),this.shouldQueue=0===this.wsBuffer.length},Stream.prototype._queueRead=function(e){this.shouldQueue?this.shouldQueue=this.push(e):this.wsBuffer.push(e)},Stream.prototype.write=function(e,t,s){var i={id:this.flowId,data:JSON.stringify(e),type:MessageType.STREAM_VALUE};return Duplex.prototype.write.call(this,i,t,s)},Stream.prototype._write=function(e,t,s){this.webSocketPromise.then(function(t){t.send(JSON.stringify(e)),s()})},Stream.prototype.end=function(e,t,s){this.isClient?(void 0!==e&&this.write(e,t),this.clientClose()):this.serverClose(),Duplex.prototype.end.call(this,null,null,s)},module.exports=Stream;
},{"./message_type":76,"stream":56,"util":58}],80:[function(require,module,exports){
function ProxyConnection(e){this.url=e.replace(/^(http|https)/,"ws")+"/ws",this.currentWebSocketPromise=null;var o=new Deferred;Proxy.call(this,o.promise),o.resolve(this.getWebSocket())}var WebSocket=require("./../lib/websocket"),Deferred=require("./../lib/deferred"),vLog=require("./../lib/vlog"),Proxy=require("./proxy");ProxyConnection.prototype=Object.create(Proxy.prototype),ProxyConnection.prototype.constructor=ProxyConnection,ProxyConnection.prototype.getWebSocket=function(){if(this.currentWebSocketPromise)return this.currentWebSocketPromise;var e=new WebSocket(this.url),o=this,r=new Deferred;this.currentWebSocketPromise=r.promise,e.onopen=function(){vLog.info("Connected to proxy at",o.url),r.resolve(e)};var t=this._configDeferred;return e.onerror=function(e){vLog.error("Failed to connect to proxy at url:",o.url),r.reject(e),t.reject("Proxy connection closed, failed to get config "+e)},e.onmessage=function(e){var r;try{r=JSON.parse(e.data)}catch(t){return void vLog.warn("Failed to parse "+e.data)}o.process(r)},r.promise},module.exports=ProxyConnection;
},{"./../lib/deferred":67,"./../lib/vlog":70,"./../lib/websocket":71,"./proxy":77}],81:[function(require,module,exports){
function Runtime(e){return this instanceof Runtime?(this.identityName=e.identityName,this._wspr=e.wspr,void(this.identity=new PrivateId(this._getProxyConnection()))):new Runtime(e)}var Server=require("../ipc/server"),ServerRouter=require("../ipc/server_router"),Client=require("../ipc/client"),ProxyConnection=require("../proxy/websocket"),MessageType=require("../proxy/message_type"),Namespace=require("../namespace/namespace"),PrivateId=require("../security/private"),PublicId=require("../security/public"),Promise=require("../lib/promise"),Deferred=require("../lib/deferred"),SimpleHandler=require("../proxy/simple_handler");module.exports=Runtime,Runtime.prototype.bindTo=function(e,t,r){var n=this,i=this._getClient();return"function"==typeof t&&(r=t,t=void 0),r&&(r=r.bind(n)),i.bindTo(e,t,r)},Runtime.prototype.close=function(e){function t(e){e.onclose=n.resolve,e.close()}var r=this,n=new Deferred(e);return r._getProxyConnection().getWebSocket().then(t).catch(n.reject),n.promise},Runtime.prototype.serve=function(e,t,r,n){var i=this._getServer();return i.serve(e,t,r,n)},Runtime.prototype.addIDL=function(e){var t=this._getServer();return t.addIDL(e)},Runtime.prototype._getProxyConnection=function(){return this._proxyConnection||(this._proxyConnection=new ProxyConnection(this._wspr)),this._proxyConnection},Runtime.prototype._getRouter=function(){return this._router||(this._router=new ServerRouter(this._getProxyConnection())),this._router},Runtime.prototype._getClient=function(){return this._client=this._client||new Client(this._getProxyConnection()),this._client},Runtime.prototype._getServer=function(){return this._server=this._server||new Server(this._getRouter()),this._server},Runtime.prototype.newNamespace=function(e){var t=this,r=this._getProxyConnection();return e?Promise.resolve(new Namespace(this._getClient(),e)):(r.getWebSocket(),r.config.then(function(e){return new Namespace(t._getClient(),e.mounttableRoot)}))},Runtime.prototype.newIdentity=function(e,t){var r=new Deferred(t),n=this._getProxyConnection(),i=n.nextId(),o=new SimpleHandler(r,n,i);return n.sendRequest(JSON.stringify(e),MessageType.NEW_ID,o,i),r.promise.then(function(e){return new PublicId(e.names,e.handle,n)})};
},{"../ipc/client":64,"../ipc/server":65,"../ipc/server_router":66,"../lib/deferred":67,"../lib/promise":68,"../namespace/namespace":72,"../proxy/message_type":76,"../proxy/simple_handler":78,"../proxy/websocket":80,"../security/private":82,"../security/public":83}],82:[function(require,module,exports){
function PrivateId(e){this._proxy=e}var Deferred=require("../lib/deferred"),SimpleHandler=require("../proxy/simple_handler"),PublicId=require("./public"),MessageType=require("../proxy/message_type");PrivateId.prototype.bless=function(e,r,i,n,s){var t=new Deferred(s);if(!(e instanceof PublicId))return t.reject(new Error("blessee should be of type PublicId")),t.promise;var a=JSON.stringify({handle:e._id,name:r,durationMs:i,caveats:n}),d=this._proxy.nextId(),o=new SimpleHandler(t,this._proxy,d);this._proxy.sendRequest(a,MessageType.BLESS,o,d);var p=this._proxy;return t.promise.then(function(e){var r=new PublicId(e.names,e.handle,p._proxy);return r})},module.exports=PrivateId;
},{"../lib/deferred":67,"../proxy/message_type":76,"../proxy/simple_handler":78,"./public":83}],83:[function(require,module,exports){
function PublicId(t,e,i){this.names=t,this._id=e,this._count=1,this._proxy=i}function nameMatches(t,e){for(var i=t.split("/"),n=e.split("/"),r=0;r<n.length;r++){if("*"===n[r])return r===n.length-1;if(r===i.length)return!0;if(i[r]!==n[r])return!1}return i.length===n.length}var MessageType=require("../proxy/message_type");PublicId.prototype.match=function(t){if(""===t||!t)return!1;for(var e=0;e<this.names.length;e++)if(nameMatches(this.names[e],t))return!0;return!1},PublicId.prototype.retain=function(){this._count++},PublicId.prototype.release=function(){if(this._count--,0===this._count){var t=JSON.stringify(this._id);this._proxy.sendRequest(t,MessageType.UNLINK_ID,null,this._proxy.nextId())}},PublicId.prototype.toJSON=function(){return{id:this._id,names:this.names}},module.exports=PublicId;
},{"../proxy/message_type":76}],84:[function(require,module,exports){
(function (process){
function init(e,r){"function"==typeof e&&(r=e,e={}),e=extend(defaults,e);var t=new Deferred(r),n={wspr:e.wspr||process.env.WSPR||"http://localhost:8124"};return e.authenticate?getIdentity(e.authTimeout,function(e,r){return e?(t.reject(e),t.promise):(n.identityName=r,void t.resolve(new Runtime(n)))}):(n.identityName="unknown",t.resolve(new Runtime(n))),t.promise}function getIdentity(e,r){function t(){window.clearInterval(l),window.clearTimeout(a)}function n(e){s(),r(null,e.name)}function i(e){s(),r(e)}function o(){t()}function u(){i(new Error("Auth timeout. Please ensure that the Veyron Chrome Extension is installed and enabled. Download it here: https://github.com/veyron/veyron.js/raw/master/extension/veyron.crx"))}function s(){t(),m.removeListener("auth:success",n),m.removeListener("auth:error",i)}if(!isBrowser)return r(new Error("authenticate=true requires browser environment"));var a,l,c=require("postie"),m=new c(window);m.on("auth:success",n),m.on("auth:error",i),m.on("auth:received",o),l=window.setInterval(function(){m.post("auth")},200),a=window.setTimeout(u,e)}var extend=require("xtend"),isBrowser=require("is-browser"),Deferred=require("./lib/deferred"),Runtime=require("./runtime/runtime"),vlog=require("./lib/vlog"),defaults={logLevel:vlog.level,authenticate:!1,authTimeout:5e3};module.exports={errors:require("./lib/verror"),init:init,logLevels:require("./lib/vlog").levels,namespaceUtil:require("./namespace/util"),Promise:require("./lib/promise")};
}).call(this,require("FWaASH"))
},{"./lib/deferred":67,"./lib/promise":68,"./lib/verror":69,"./lib/vlog":70,"./namespace/util":73,"./runtime/runtime":81,"FWaASH":42,"is-browser":59,"postie":60,"xtend":62}]},{},[84])


//# sourceMappingURL=dist/veyron.js.map